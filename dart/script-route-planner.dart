import "dart:typed_data" as HB;import "dart:html" as IB;import "dart:js" as gB;import "dart:async" as uB;import "dart:math" as lC;import "dart:convert" as oD;class oE{static const String pE="Chrome";static const String qE="Firefox";static const String rE="Internet Explorer";static const String sE="Safari";final String WE;final String minimumVersion;const oE(this.WE,[this.minimumVersion]);}class tE{const tE();}class uE{final String name;const uE(this.name);}class vE{const vE();}class wE{const wE();}class pD{void hE(){GF();HF();IF();JF();KF();LF();MF();NF();}void GF(){IB.Element j=IB.querySelector('.close-jumbotron-button');IB.Element k=IB.querySelector('.open-jumbotron-button');if(j==null||k==null){return;}IB.Element g=IB.querySelector('.jumbotron');IB.Element h=IB.querySelector('.jumbotron-folded');j.onClick.listen((i){g.style.display='none';h.style.display='block';UD('closeJumbotron','1',expires:180);i.stopPropagation();});k.onClick.listen((i){g.style.display='block';h.style.display='none';UD('closeJumbotron','1',expires:180);i.stopPropagation();});if(ME('closeJumbotron')=='1'){g.style.display='none';h.style.display='block';}}void HF(){IB.Element i=IB.querySelector('.navbar-toggle-button');IB.Element g=IB.querySelector('.navbar-collapsible-block');bool h=false;var j=(OF){if(h){g.classes..add('in')..remove('collapse')..remove('collapsing');}else{g.classes..add('collapse')..remove('collapsing')..remove('in');g.style.height='0';}};g.onTransitionEnd.listen(j);i.onClick.listen((l){h=!h;g.classes..add('collapsing')..remove('collapse')..remove('in');if(h){int k=g.scrollHeight+1;g.style.height="${k}px";}else{g.style.height="0";}});}void IF(){List<IB.Node> k=IB.document.getElementsByTagName('span');DateTime l=new DateTime.now();Duration m=l.timeZoneOffset;List<String> n=const['Понедельник','Вторник','Среда','Четверг','Пятница','Суббота','Воскресенье'];List<String> o=const['января','февраля','марта','апреля','мая','июня','июля','августа','сентября','октября','ноября','декабря'];k.forEach((IB.Element h){String i=h.dataset['postDate'];if(i==null){return;}DateTime j=DateTime.parse(i);if(j==null){return;}DateTime g=j.add(m);h.text="${n[g.weekday-1]}, ${g.day} ${o[g.month-1]} ${g.year}" ", ${g.hour<10?'0':''}${g.hour}:${g.minute<10?'0':''}${g.minute}";});}void JF(){IB.ElementList h=IB.querySelectorAll('span.post-comments');if(h.length==0){return;}new uB.Timer.periodic(new Duration(microseconds:100),(l){if(h[0].text.startsWith('Считаем')){return;}l.cancel();h.forEach((IB.Element m){IB.Element i=m.querySelector('a');if(i==null){return;}i.text=i.text.replaceAllMapped(new RegExp('^(\\d+) комментариев\$'),(Match k){int g=int.parse(k[1]);if((g%100/10).round()!=1){int j=g%10;if(j==1){return '${g} комментарий';}else if(j>=2&&j<=4){return '${g} комментария';}}return k[0];});});});}void KF(){if(PF()){QF();}}bool PF(){final IB.NodeValidatorBuilder RF=new IB.NodeValidatorBuilder.common()..allowElement('span',attributes:['data-linenum']);IB.ElementList n=IB.querySelectorAll('pre > code.sourceCode');if(n.length>0){gB.JsObject q=gB.context['hljs'];n.forEach((IB.HtmlElement j){q.callMethod('highlightBlock',[j]);List<String> h=j.innerHtml.split('\n');RegExp s=new RegExp(r'<span[\s\S]*?>');RegExp u=new RegExp(r'</span>');List<String> k=[] ;for(int g=0;g<h.length; ++g){String i='<span class="line" data-linenum="${g+1}">';if(h[g]==''){i+= '&nbsp;';}else{String l=k.join('')+h[g];i+= l;Iterable<Match> o=s.allMatches(l);Iterable<Match> v=u.allMatches(l);k=[] ;for(int m=v.length;m<o.length; ++m){k.add(o.elementAt(m).group(0));i+= '</span>';}}i+= '</span>';h[g]=i;}j.setInnerHtml(h.join('\n'),validator:RF);j.classes.add('highlighted');});return true;}else{return false;}}void QF(){IB.Element k=new IB.DivElement()..classes.add('tooltip-inner');IB.Element g=new IB.DivElement()..append(new IB.DivElement()..classes.add('tooltip-arrow'))..append(k)..classes.addAll(['tooltip','left','fade']);g.classes.add(IB.CssStyleDeclaration.supportsTransitions?'out':'in');g.style.display='none';IB.document.body.append(g);g.onTransitionEnd.listen((IB.TransitionEvent i){if(g.classes.contains('out')){g.style.display='none';}});void m(){if(!IB.CssStyleDeclaration.supportsTransitions){g.style.display='none';}else{g.classes..remove('in')..add('out');}}void n(o){g.style..visibility='hidden'..display='block';g.style..left="${o.offsetLeft-g.clientWidth}px"..top="${o.offsetTop-2}px"..visibility="visible";if(IB.CssStyleDeclaration.supportsTransitions){g.classes..remove('out')..add('in');}}IB.Element h;bool j=false;var l=IB.querySelectorAll('span.line');l.onClick.listen((IB.MouseEvent i){if(h==i.currentTarget){if(!j){j=true;return;}m();h=null;j=false;return;}j=true;h=i.currentTarget;k.text='#'+h.getAttribute('data-linenum');n(h);});l.onMouseMove.listen((IB.MouseEvent i){if(j||h==i.currentTarget){return;}h=i.currentTarget;k.text='#'+h.getAttribute('data-linenum');n(h);});l.onMouseOut.listen((IB.MouseEvent i){if(j||h!=i.currentTarget){return;}m();h=null;});}void LF(){var j=IB.querySelectorAll('.note-link');if(j.length==0){return;}IB.Element k=new IB.HeadingElement.h3()..classes.add('popover-title');IB.DivElement l=new IB.DivElement()..classes.add('popover-content');IB.Element g=new IB.DivElement()..append(new IB.DivElement()..classes.add('arrow'))..append(k)..append(l)..classes.addAll(['popover','top','fade']);g.classes.add(IB.CssStyleDeclaration.supportsTransitions?'out':'in');g.style.display='none';IB.document.body.append(g);g.onTransitionEnd.listen((IB.TransitionEvent m){if(g.classes.contains('out')){g.style.display='none';}});var i;final IB.NodeValidatorBuilder RF=new IB.NodeValidatorBuilder.common()..allowNavigation(new xE());j.onClick.listen((IB.MouseEvent m){var h=m.currentTarget;if(i==h){if(!IB.CssStyleDeclaration.supportsTransitions){g.style.display='none';}else{g.classes..remove('in')..add('out');}i=null;return;}k.text="Примечание ${h.text}";var n=IB.querySelector('.footnotes li[data-for=${h.id}]');if(n==null){return;}l.setInnerHtml(n.innerHtml,validator:RF);i=h;g.style..visibility='hidden'..display='block';g.style..left="${h.offsetLeft+(h.clientWidth-g.clientWidth)/2+2}px"..top="${h.offsetTop-g.clientHeight}px"..visibility="visible";if(IB.CssStyleDeclaration.supportsTransitions){g.classes..remove('out')..add('in');}});}void MF(){IB.Element g=IB.querySelector('.pager .previous');IB.Element h=IB.querySelector('.pager .next');bool k=IB.window.navigator.platform.indexOf('Mac')!=-1;if(g!=null){g.attributes['title']+=" (${k?'⌥←':'Ctrl + ←'})";}if(h!=null){h.attributes['title']+=" (${k?'⌥→':'Ctrl + →'})";}if(g!=null||h!=null){IB.document.onKeyDown.listen((IB.KeyboardEvent i){if(i.altKey||i.ctrlKey){IB.Element j;if(i.keyCode==IB.KeyCode.LEFT){j=g;}else if(i.keyCode==IB.KeyCode.RIGHT){j=h;}if(j!=null){IB.window.location.replace(j.querySelector('a').getAttribute('href'));}}});}}void NF(){if(IB.querySelectorAll('span.math').length>0){IB.Element g=new IB.ScriptElement()..type="text/javascript"..async=true..src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML";IB.document.body.append(g);}}}class xE implements IB.UriPolicy{bool allowsUri(String g){return true;}}class rD{IB.Element UF;zB TF;gB.JsObject map;gB.JsObject fB;gB.JsObject KC;rD(this.TF,this.UF){gB.JsObject h=new gB.JsObject.jsify({"behaviors":["drag","scrollZoom","dblClickZoom","multiTouch","rightMouseButtonMagnifier"],"center":[53.906077,27.554914],"zoom":8});map=new gB.JsObject(gB.context['ymaps']['Map'],[this.UF,h]);map['controls'].callMethod('add',['zoomControl']);gB.JsObject g=new gB.JsObject(gB.context['ymaps']['control']['Button'],[new gB.JsObject.jsify({"data":{"content":'<span class="glyphicon glyphicon-fullscreen"></span>',"title":"На полный экран"}}),new gB.JsObject.jsify({"position":{"left":5,"top":5}})]);g['events'].callMethod("add",["select",(hF)=>oF(true)]);g['events'].callMethod("add",["deselect",(hF)=>oF(false)]);map['controls'].callMethod('add',[g]);TF.yC.listen(sC);TF.vC.listen(YE);TF.wC.listen(aE);TF.xC.listen(rC);TF.uC.listen(ZE);TF.zC.listen(AD);}void oF(bool g){if(KC==null){KC=map.callMethod("getBounds");}if(g){UF.classes.add("full-screen");}else{UF.classes.remove("full-screen");}map['container'].callMethod("fitToViewport",[] );map.callMethod("setBounds",[KC]);}void sC(vB<t> g){if(g.oldValue!=null){map["geoObjects"].callMethod("remove",[g.oldValue.sB]);}gB.JsObject h=g.newValue.sB;h['options'].callMethod('set',['preset','twirl#blueDotIcon']);map["geoObjects"].callMethod("add",[h]);}void YE(t h){gB.JsObject g=h.sB;g['options'].callMethod('set',['preset','twirl#blueIcon']);map["geoObjects"].callMethod("add",[g]);}void ZE(List<t> h){for(t i in h){gB.JsObject g=i.sB;g['options'].callMethod('set',['preset','twirl#blueIcon']);map["geoObjects"].callMethod("add",[g]);}}void aE(t g){map["geoObjects"].callMethod("remove",[g.sB]);}void rC(List<t> g){for(t h in g){map["geoObjects"].callMethod("remove",[h.sB]);}}void AD(vB<mB> q){if(fB!=null){map["geoObjects"].callMethod("remove",[fB]);}mB i=q.newValue;if(i==null){fB=null;return;}var g=i.path[0][0];List<List<double>> n=[] ;double j=g.pB;double l=g.pB;double k=g.yB;double m=g.yB;n.add([g.pB,g.yB]);for(int o=0;o<i.path.length; ++o){t h=i.path[o][1];j=lC.min(j,h.pB);k=lC.min(k,h.yB);l=lC.max(l,h.pB);m=lC.max(m,h.yB);n.add([h.pB,h.yB]);}if(i.DC<AC.NC){gB.JsObject s=new gB.JsObject(gB.context['ymaps']['geometry']['LineString'],[new gB.JsObject.jsify(n),new gB.JsObject.jsify({"coordRendering":'shortestPath',"geodesic":true})]);fB=new gB.JsObject(gB.context['ymaps']['GeoObject'],[new gB.JsObject.jsify({"geometry":s})]);map["geoObjects"].callMethod("add",[fB]);}if(j==l&&k==m){map.callMethod("setCenter",[new gB.JsObject.jsify([j,k]),8]);KC=map.callMethod("getBounds");}else{KC=new gB.JsObject.jsify([[j,k],[l,m]]);map.callMethod("setBounds",[KC]);}}void reset(){if(fB!=null){map["geoObjects"].callMethod("remove",[fB]);}for(t g in TF.dB){map["geoObjects"].callMethod("remove",[g.sB]);}map["geoObjects"].callMethod("remove",[TF.QB.sB]);map["geoObjects"].callMethod("remove",[TF.RB.sB]);}}class qD{zB TF;IB.Element UF;Map<t,IB.LIElement> aF=<t,IB.LIElement>{};qD(this.TF,this.UF){cF();TF..yC.listen(sC)..vC.listen(xB)..uC.listen(VE)..xC.listen(rC)..wC.listen(fC);}void cF(){IB.LIElement g=new IB.LIElement()..classes.add('list-group-item');new yE(TF,g);IB.UListElement h=new IB.UListElement()..classes.add('list-group')..append(new IB.LIElement()..classes.add('list-group-item')..append(new IB.HeadingElement.h4()..classes.add('list-group-item-heading')..text='Города'))..append(g)..append(new IB.LIElement()..classes.addAll(['list-group-item','first-city']))..append(new IB.LIElement()..classes.addAll(['list-group-item','last-city']));UF.append(h);}void sC(vB<t> g){if(TF.QB!=null){rF(UF.querySelector('.first-city'),false,true,TF.QB);}if(TF.RB!=null){rF(UF.querySelector('.last-city'),true,false,TF.RB);}}void xB(t h){IB.LIElement g=new IB.LIElement()..classes.addAll(['list-group-item']);rF(g,true,true,h);UF.children.first.insertBefore(g,UF.querySelector('.last-city'));aF[h]=g;}void VE(List<t> g)=>g.forEach(xB);void fC(t g){IB.LIElement h=aF[g];if(h==null){return;}h.remove();aF.remove(g);}void rC(List<t> g)=>g.forEach(fC);IB.ButtonElement uF(String g,String h){return new IB.ButtonElement()..classes.addAll(["btn","btn-default","btn-xs"])..title=g..append(new IB.SpanElement()..classes.addAll(["glyphicon","glyphicon-${h}"]));}void rF(IB.Element k,bool l,bool m,t g){k.innerHtml='';IB.ButtonElement h=uF("Удалить","remove");if(!l||!m){h.disabled=true;}else{h.onClick.listen((hF)=>TF.fC(g));}IB.ButtonElement i=uF("В начало","chevron-up");if(!l){i.disabled=true;}else{i.onClick.listen((hF)=>TF.iE(g));}IB.ButtonElement j=uF("В конец","chevron-down");if(!m){j.disabled=true;}else{j.onClick.listen((hF)=>TF.jE(g));}IB.DivElement n=new IB.DivElement()..classes.add("btn-group")..append(h)..append(i)..append(j);k..append(n)..appendText(" "+g.name);}}class tD{zB TF;IB.Element UF;sD bC;tD(this.TF,this.UF){cF();bC=new sD(TF,UF.querySelector('.route-header'));TF.zC.listen(AD);TF.kE.listen(LC);}void cF(){IB.UListElement g=new IB.UListElement()..classes.add('list-group')..append(new IB.LIElement()..classes.addAll(['list-group-item','route-header'])..append(new IB.HeadingElement.h4()..classes.addAll(['list-group-item-heading','route-title'])));UF.append(g);}void LC(bool i){if(i){IB.ElementList g=UF.querySelectorAll('.route-item');g.forEach((h)=>h.remove());IB.Element j=UF.children.first;j.append(new IB.LIElement()..classes.addAll(['list-group-item','route-item','calc-progress'])..append(new IB.DivElement()..classes.addAll(['progress','progress-striped','active'])..append(new IB.DivElement()..classes.add('progress-bar')..style.width='100%')));}else{IB.ElementList g=UF.querySelectorAll('.route-item.calc-progress');g.forEach((h)=>h.remove());}}void AD(vB<mB> i){IB.ElementList j=UF.querySelectorAll('.route-item');j.forEach((k)=>k.remove());mB h=i.newValue;if(h==null){UF.querySelector('.route-title').text='Маршрут не существует';return;}UF.querySelector('.route-title').text='Маршрут ${h.dE} км';IB.Element l=UF.children.first;h.path.forEach((List<t> g)=>l.append(new IB.LIElement()..classes.addAll(['list-group-item','route-item'])..append(new IB.SpanElement()..classes.addAll(['badge','distance','pull-right'])..text="${g[0].distanceTo(g[1]).round()} км")..append(new IB.ButtonElement()..classes.addAll(['btn','btn-default','btn-xs'])..title='Исключить'..append(new IB.SpanElement()..classes.addAll(['glyphicon','glyphicon-remove']))..onClick.listen((hF)=>TF.eE(g)))..appendHtml(' ${g[0].name} &mdash; ${g[1].name}')));}}class uD{IB.Element UF;zB TF;uD(this.TF,this.UF){cF();dF();TF.gD.listen((hF)=>dF());TF.hD.listen((hF)=>dF());}void cF(){IB.UListElement g=new IB.UListElement()..classes.add('list-group')..append(new IB.LIElement()..classes.add('list-group-item')..append(new IB.HeadingElement.h4()..classes.add('list-group-item-heading')..text='Исключения'));UF.append(g);}IB.LIElement nF()=>new IB.LIElement()..classes.addAll(['list-group-item','exclusions-item'])..text='Нет исключений';void dF(){IB.ElementList i=UF.querySelectorAll(".exclusions-item");i.forEach((j)=>j.remove());IB.Element h=UF.children[0];if(TF.EC.length==0){h.append(nF());return;}for(List<t> g in TF.EC){h.append(new IB.LIElement()..classes.addAll(['list-group-item','exclusions-item'])..append(new IB.ButtonElement()..classes.addAll(['btn','btn-default','btn-xs'])..title="Включить"..append(new IB.SpanElement()..classes.addAll(['glyphicon','glyphicon-remove']))..onClick.listen((hF)=>TF.gE(g)))..appendHtml(" ${g[0].name} &mdash; ${g[1].name}"));}}}class vD{static uB.Future<List<t>> wD(String k){uB.Completer<List<t>> h=new uB.Completer<List<t>>();IB.HttpRequest.getString('http://geocode-maps.yandex.ru/1.x/?format=json&geocode='+k).then((String l){oD.JsonDecoder m=new oD.JsonDecoder(null);Map n=m.convert(l);List<t> i=<t>[] ;for(Map g in n['response']['GeoObjectCollection']['featureMember']){if(g['GeoObject']['metaDataProperty']['GeocoderMetaData']['kind']!='locality'){continue;}List<String> j=g['GeoObject']['Point']['pos'].split(' ');i.add(new t(g['GeoObject']['name'],double.parse(j[1]),double.parse(j[0]),g['GeoObject']['metaDataProperty']['GeocoderMetaData']['text']));}h.complete(i);}).catchError(h.completeError);return h.future;}}class t{String SF;String VF;double WF;double ZF;t(this.SF,this.WF,this.ZF,[this.VF='']);t.FF(String h){List<String> g=h.split("|");SF=g[0];WF=double.parse(g[1]);ZF=double.parse(g[2]);VF='';}String get name=>SF;String get fE=>VF;double get pB=>WF;double get yB=>ZF;gB.JsObject mF;gB.JsObject get sB{if(mF==null){mF=new gB.JsObject(gB.context['ymaps']['Placemark'],[new gB.JsObject.jsify([WF,ZF]),new gB.JsObject.jsify({"balloonContent":SF})]);}return mF;}static const double xD=6371.0;static const double PC=lC.PI/180;double distanceTo(t g){double i=(g.pB-pB)*PC;double j=(g.yB-yB)*PC;double h=lC.pow(lC.sin(i/2.0),2)+lC.cos(pB*PC)*lC.cos(g.pB*PC)*lC.pow(lC.sin(j/2.0),2);double k=2*lC.atan2(lC.sqrt(h),lC.sqrt(1-h));return xD*k;}String toString()=>VF==''?"${SF} (${WF}, ${ZF})":"${VF} (${WF}, ${ZF})";String lD()=>"${SF}|${WF}|${ZF}";}class mB{List<List<t>> path;double DC;int get dE=>DC.round();mB(this.path,this.DC);}class vB<ED>{ED oldValue;ED newValue;vB(this.newValue,this.oldValue);}class yE{zB TF;IB.Element UF;List<t> YF=null;int bF=-1;int get iB=>bF;void set iB(int h){IB.Element g=UF.querySelector('.list-group-item-info');if(g!=null){g.classes.remove('list-group-item-info');}bF=h;g=UF.querySelector('.suggestion-${bF}');if(g!=null){g.classes.add('list-group-item-info');}}List<t> get jB=>YF;void set jB(List<t> j){YF=j;IB.Element h=UF.querySelector('.suggestions-list');if(h!=null){h.remove();}if(YF==null){UF.querySelector('.hide-button').classes.add('hidden');return;}UF.querySelector('.hide-button').classes.remove('hidden');if(YF.length==0){UF.append(new IB.DivElement()..classes.add('suggestions-list')..text='Ничего не найдено.');return;}IB.UListElement i=new IB.UListElement()..classes.addAll(['list-group','suggestions-list']);for(int g=0;g<YF.length; ++g){i.append(new IB.LIElement()..classes.addAll(['list-group-item','suggestion-${g}'])..append(new IB.AnchorElement()..href='#'..text=YF[g].fE..onClick.listen((k){k.preventDefault();xB(YF[g]);})));}UF.append(i);}yE(this.TF,this.UF){cF();}void cF(){IB.FormElement g=new IB.FormElement()..classes.add('form-inline')..append(new IB.DivElement()..classes.add('input-group')..append(new IB.LabelElement()..classes.add('sr-only')..htmlFor="searchText"..text='Добавить город')..append(new IB.SearchInputElement()..classes.addAll(['form-control','input-sm','search-input'])..id='searchText'..autocomplete='off'..placeholder='Добавить город'..onKeyDown.listen(lE))..append(new IB.SpanElement()..classes.add('input-group-btn')..append(new IB.ButtonElement()..classes.addAll(['btn','btn-default','btn-sm','hidden','hide-button'])..title="Скрыть результаты"..append(new IB.SpanElement()..classes.addAll(['glyphicon','glyphicon-remove']))..onClick.listen((hF){jB=null;(UF.querySelector('.search-input') as IB.SearchInputElement).value='';}))..append(new IB.ButtonElement()..classes.addAll(['btn','btn-default','btn-sm'])..title="Искать"..append(new IB.SpanElement()..classes.addAll(['glyphicon','glyphicon-search']))..onClick.listen((hF)=>jD()))));UF.append(g);}void lE(IB.KeyboardEvent h){bool g=false;switch (h.keyCode){case IB.KeyCode.ENTER:if(jB!=null&&iB!=-1){xB(jB[iB]);}else{jD();}g=true;break;case IB.KeyCode.ESC:jB=null;(UF.querySelector('.search-input') as IB.SearchInputElement).value='';g=true;break;case IB.KeyCode.UP:if(jB==null){break;} --iB;if(iB<0){iB=jB.length-1;}wF();g=true;break;case IB.KeyCode.DOWN:if(jB==null){break;} ++iB;if(iB>=jB.length){iB=0;}wF();g=true;break;}if(g){h.preventDefault();h.stopPropagation();}}void xB(t g){TF.xB(g);jB=null;(UF.querySelector('.search-input') as IB.SearchInputElement).value='';}void jD(){vD.wD((UF.querySelector('.search-input') as IB.SearchInputElement).value).then((g){if(g.length==1){xB(g[0]);return;}jB=g;iB=-1;});}void wF(){IB.Element h=IB.querySelector('.suggestions-list .suggestion-${iB}');lC.Point g=h.offsetTo(IB.document.body);if(g.y<IB.window.scrollY+70){IB.window.scrollTo(IB.window.scrollX,g.y-70);}if(g.y+h.clientHeight>IB.window.scrollY+IB.window.innerHeight){IB.window.scrollTo(IB.window.scrollX,g.y+h.clientHeight-IB.window.innerHeight);}}}class sD{IB.Element UF;zB TF;bool XF;bool get JC=>XF;void set JC(bool g){(UF.querySelector('.autoupdate-checkbox') as IB.CheckboxInputElement).checked=g;XF=g;}AC kF;sD(this.TF,this.UF){cF();JC=false;TF.yC.listen(lF);TF.vC.listen(lF);TF.wC.listen(lF);TF.xC.listen(lF);TF.uC.listen(lF);TF.gD.listen(lF);TF.hD.listen(lF);}void cF(){UF.insertBefore(new IB.ButtonElement()..classes.addAll(['btn','btn-default','btn-xs','pull-right','refresh-button'])..title='Обновить'..append(new IB.SpanElement()..classes.addAll(["glyphicon","glyphicon-refresh"])..onClick.listen((hF)=>YD())),UF.children[0]);UF.append(new IB.FormElement()..append(new IB.DivElement()..classes.add("checkbox")..append(new IB.LabelElement()..append(new IB.CheckboxInputElement()..classes.add('autoupdate-checkbox')..onChange.listen((g)=>XF=(UF.querySelector('.autoupdate-checkbox') as IB.CheckboxInputElement).checked))..appendText("Автообновление"))));}uB.Timer tF;static final Duration yD=new Duration(milliseconds:50);void lF(hF){if(!JC){return;}if(tF!=null&&tF.isActive){tF.cancel();}tF=new uB.Timer(yD,YD);}void YD(){if(kF!=null){kF.cancel();TF.LC=false;kF=null;}uB.Timer.run(vF);}void vF(){if(kF!=null){return;}if(TF.dB.length==0){bool q=false;TF.EC.forEach((List<t> k){if(k[0]==TF.QB&&k[1]==TF.RB||k[1]==TF.QB&&k[0]==TF.RB){q=true;}});if(q){TF.path=null;return;}TF.path=new mB(<List<t>>[<t>[TF.QB,TF.RB]],TF.QB.distanceTo(TF.RB));return;}TF.LC=true;List<t> i=<t>[TF.QB];i.addAll(TF.dB);i.add(TF.RB);int l=i.length;List<List<double>> h=<List<double>>[] ;for(int g=0;g<l; ++g){h.add(new List<double>.filled(l,AC.NC));}for(int g=0;g<TF.dB.length; ++g){h[0][g+1]=TF.QB.distanceTo(TF.dB[g]);h[g+1][l-1]=TF.RB.distanceTo(TF.dB[g]);}h[l-1][0]=0.0;for(int g=0;g<TF.dB.length-1; ++g){for(int j=g+1;j<TF.dB.length; ++j){double s=TF.dB[g].distanceTo(TF.dB[j]);h[g+1][j+1]=s;h[j+1][g+1]=s;}}if(TF.EC!=null){for(List<t> u in TF.EC){int m=-1;while ((m=i.indexOf(u[0],m+1))!=-1){int n=-1;while ((n=i.indexOf(u[1],n+1))!=-1){h[m][n]=AC.NC;h[n][m]=AC.NC;}}}}IB.Element o=IB.querySelector('.route-widget .refresh-button');IB.Element v=o.querySelector('.glyphicon');o.classes.add('disabled');v.classes.add('in-progress');kF=new AF();kF.kD(h).then((AB){xF(AB);}).whenComplete((){v.classes.remove('in-progress');o.classes.remove('disabled');kF=null;TF.LC=false;}).catchError((hF){});}t yF(int g){if(g==0){return TF.QB;}else if(g==TF.dB.length+1){return TF.RB;}else{return TF.dB[g-1];}}void xF(QC g){if(g.DC>AC.NC){TF.path=null;}else{List<List<t>> i=<List<t>>[] ;for(int h=0;h<g.points.length-1; ++h){i.add(<t>[yF(g.points[h]),yF(g.points[h+1])]);}TF.path=new mB(i,g.DC);}}}class zB{List<t> aF;t eF;t fF;mB gF;List<List<t>> iF;bool jF;zB(){aF=<t>[] ;iF=<List<t>>[] ;}t get QB=>eF;void set QB(t g){t h=eF;eF=g;OC.add(new vB(g,h));}t get RB=>fF;void set RB(t g){t h=fF;fF=g;OC.add(new vB(g,h));}mB get path=>gF;void set path(mB g){mB h=gF;gF=g;iD.add(new vB(g,h));}List<t> get dB=>aF;void xB(t g){aF.add(g);dC.add(g);}void UE(List<t> g){aF.addAll(g);XD.add(g);}void fC(t g){aF.remove(g);eC.add(g);}void mE(){List<t> g=aF;aF=<t>[] ;aD.add(g);}void iE(t h){t g=eF;aF.remove(h);eC.add(h);QB=h;if(aF.indexOf(g)==-1&&RB!=g){aF.add(g);dC.add(g);}else if(RB==g){OC.add(new vB(RB,RB));}}void jE(t h){t g=fF;aF.remove(h);eC.add(h);RB=h;if(aF.indexOf(g)==-1&&g!=QB){aF.add(g);dC.add(g);}else if(g==QB){OC.add(new vB(QB,QB));}}List<List<t>> get EC=>iF;void eE(List<t> g){if(iF.contains(g)){return;}iF.add(g);bD.add(g);}void gE(List<t> g){if(iF.remove(g)){dD.add(g);}}bool get LC=>jF;void set LC(bool g){jF=g;ZD.add(g);}uB.StreamController<vB<t>> OC=new uB.StreamController<vB<t>>.broadcast(sync:true);uB.Stream<vB<t>> get yC=>OC.stream;uB.StreamController<t> dC=new uB.StreamController<t>.broadcast(sync:true);uB.Stream<t> get vC=>dC.stream;uB.StreamController<t> eC=new uB.StreamController<t>.broadcast(sync:true);uB.Stream<t> get wC=>eC.stream;uB.StreamController<List<t>> aD=new uB.StreamController<List<t>>.broadcast(sync:true);uB.Stream<List<t>> get xC=>aD.stream;uB.StreamController<List<t>> XD=new uB.StreamController<List<t>>.broadcast(sync:true);uB.Stream<List<t>> get uC=>XD.stream;uB.StreamController<vB<mB>> iD=new uB.StreamController<vB<mB>>.broadcast(sync:true);uB.Stream<vB<mB>> get zC=>iD.stream;uB.StreamController<List<t>> bD=new uB.StreamController<List<t>>.broadcast(sync:true);uB.Stream<List<t>> get gD=>bD.stream;uB.StreamController<List<t>> dD=new uB.StreamController<List<t>>.broadcast(sync:true);uB.Stream<List<t>> get hD=>dD.stream;uB.StreamController<bool> ZD=new uB.StreamController<bool>.broadcast(sync:true);uB.Stream<bool> get kE=>ZD.stream;}class zE{zB TF;rD map;qD XE;uD EC;tD fB;zE(){TF=new zB();map=new rD(TF,IB.querySelector('.map-widget'));XE=new qD(TF,IB.querySelector('.cities-list-widget'));fB=new tD(TF,IB.querySelector('.route-widget'));EC=new uD(TF,IB.querySelector('.exclusions-widget'));pF();IB.window.onHashChange.listen(qF);TF.zC.listen((hF)=>nE());fB.bC.JC=true;IB.querySelector('.main-widget').classes.remove('hidden');}void pF(){bool h=sF();if(!h){t g=new t("Минск",53.906077,27.554914);TF.QB=g;TF.RB=g;TF.path=new mB(<List<t>>[[g,g]],0.0);}}void qF(IB.Event g){fB.bC.JC=false;map.reset();pF();fB.bC.JC=true;}bool sF(){String i=IB.window.location.hash;if(i==''||i=='#'){return false;}i=i.substring(1);try {List<int> s=WD.TE(i);List<int> u=new CF().cE(s);String v=oD.UTF8.decode(u);List g=oD.JSON.decode(v);bool o=false;int l;if(g.last is bool&&g.last==true){o=true;g.removeLast();l=g.length;}else{l=g.length-1;}TF.mE();TF.QB=new t.FF(g.first);List<t> q=[] ;double m=0.0;List<List<t>> j=<List<t>>[] ;t h=TF.QB;for(int n=1;n<l; ++n){t k=new t.FF(g[n]);q.add(k);j.add(<t>[h,k]);m+= h.distanceTo(k);h=k;}if(o){TF.RB=TF.QB;j.add(<t>[h,TF.QB]);}else{TF.RB=new t.FF(g.last);j.add(<t>[h,TF.RB]);}m+= h.distanceTo(TF.RB);TF.UE(q);TF.path=new mB(j,m);}catch (AB){return false;}return true;}void nE(){if(TF.path==null){IB.window.location.hash='#';}List g=[TF.QB.lD()];int j=TF.path.path.length-(TF.QB==TF.RB?1:0);for(int h=0;h<j; ++h){g.add(TF.path.path[h][1].lD());}if(TF.QB==TF.RB){g.add(true);}List<int> k=oD.UTF8.encode(oD.JSON.encode(g));List<int> l=new DF().encode(k);String i=WD.SE(l);if(IB.History.supportsState){IB.window.history.replaceState(null,IB.document.title,IB.window.location.pathname+"#"+i);}else{IB.window.location.hash='#'+i;}}}abstract class AC{static final double NC=1e8;bool cC=false;uB.Future<QC> kD(List<List<double>> g);void cancel(){cC=true;}}class AF extends AC{int zF;List<List<double>> AG;List<List<int>> BG;List<List<double>> CG;List<List<double>> DG;List<nB> EG;List<int> FG;double GG;lC.Random HG=new lC.Random();int IG;int JG;static final double zD=0.1;static final double AE=2.0;static final double BE=0.5;static final double CE=1-BE;static final int FD=50;static final int DE=100;static final double BC=0.01;uB.Future<QC> kD(List<List<double>> j){uB.Completer<QC> g=new uB.Completer<QC>();cC=false;AG=j;IG=j.length*100;KG();int m=0;int h=0;void k(){if(cC){g.completeError("Cancelled");return;}if(h<DE){ ++h; ++m;LG();MG();NG();bool l=false;for(nB i in EG){if(FG==null||i.qB<GG){FG=i.bB;GG=i.qB;l=true;}}if(l){h=0;}uB.Timer.run(k);}else{uB.Timer.run((){if(cC){g.completeError("Cancelled");return;}OG();g.complete(new QC(FG,GG));});}}uB.Timer.run(k);return g.future;}void KG(){zF=AG.length;JG=(FD/2).round();CG=<List<double>>[] ;DG=<List<double>>[] ;for(int g=0;g<zF; ++g){CG.add(new List<double>.filled(zF,1.0));DG.add(new List<double>.filled(zF,0.0));}PG=new List<double>.filled(zF,0.0);QG();RG();SG();}void QG(){BG=<List<int>>[] ;for(int h=0;h<zF; ++h){List<GD<int,double>> i=<GD<int,double>>[] ;for(int g=0;g<zF; ++g){i.add(new GD(g,AG[h][g]));}i.sort((k,l)=>Comparable.compare(k.tC,l.tC));List<int> j=<int>[] ;for(int g=0;g<zF; ++g){j.add(i[g].fD);}BG.add(j);}}void RG(){for(int g=0;g<zF; ++g){for(int h=0;h<zF; ++h){DG[g][h]=lC.pow(CG[g][h],zD)*lC.pow(AG[g][h],-AE);}}}void SG(){EG=<nB>[] ;for(int g=0;g<FD; ++g){EG.add(new nB());}}void LG(){for(nB g in EG){g.reset(zF);}for(int h=1;h<zF-1; ++h){for(nB g in EG){TG(g,h);}}for(nB g in EG){int i=g.bB.last;g.bB.add(zF-1);g.qB+= AG[i][zF-1];}}List<double> PG;void TG(nB h,int l){int i=h.bB[l-1];double j=0.0;for(int g=1;g<zF-1; ++g){if(h.gC[g]){PG[g]=0.0;}else{PG[g]=DG[i][g];j+= PG[g];}}double m=HG.nextDouble()*j;int g=1;double k=PG[g];while (k<m){ ++g;k+= PG[g];}h.bB.add(g);h.qB+= AG[i][g];h.gC[g]=true;}void MG(){for(nB g in EG){bool k=true;if(k){k=false;int h=1;for(;!k&&h<zF-2; ++h){int l=g.bB[h-1];int m=g.bB[h];double s=-AG[l][m];for(int i=h+1;!k&&i<zF-1; ++i){int n=g.bB[i];int o=g.bB[i+1];double q=s-AG[n][o]+AG[l][n]+AG[m][o];if(q<0){int u=((i-h+1)/2).floor();for(int j=0;j<u; ++j){int v=g.bB[h+j];g.bB[h+j]=g.bB[i-j];g.bB[i-j]=v;}g.qB+= q; --h;k=true;}}}}}}void NG(){UG();EG.sort((nB h,nB i)=>-Comparable.compare(h.qB,i.qB));for(int g=0;g<JG-1; ++g){VG(EG[g].qB,EG[g].bB,(JG-g-1).toDouble());}if(GG!=null){VG(GG,FG,JG.toDouble());}RG();}void UG(){for(int g=0;g<zF-1; ++g){for(int h=g;h<zF; ++h){CG[g][h]*=CE;CG[h][g]=CG[g][h];}}}void VG(double k,List<int> h,double l){double m=l/k;for(int g=0;g<h.length-1; ++g){int i=h[g];int j=h[g+1];CG[i][j]+=m;CG[j][i]=CG[i][j];}}void OG(){List<double> BB=new List<double>.filled(zF,0.0);List<double> CB=new List<double>.filled(zF,0.0);List<int> j=new List<int>.from(FG);double l;bool FB=true;void GB(){for(int g=1;g<zF; ++g){BB[g]=BB[g-1]+AG[j[g-1]][j[g]];}l=BB.last;for(int g=zF-2;g>=0; --g){CB[g]=CB[g+1]+AG[j[g+1]][j[g]];}}double DB(m,k){if(m<=k){return BB[k]-BB[m];}else{return CB[k]-CB[m];}}double o(m,k,v,q,AB,EB)=>DB(0,m)+AG[j[m]][j[k]]+DB(k,v)+AG[j[v]][j[q]]+DB(q,AB)+AG[j[AB]][j[EB]]+DB(EB,zF-1);void s(m,k,v,q,AB,EB){FB=true;List<int> n=new List<int>.from(j);int u=m+1;n[u++ ]=j[k];if(k<v){for(int g=k+1;g<=v; ++g){n[u++ ]=j[g];}}else{for(int g=k-1;g>=v; --g){n[u++ ]=j[g];}}n[u++ ]=j[q];if(q<AB){for(int g=q+1;g<=AB; ++g){n[u++ ]=j[g];}}else{for(int g=q-1;g>=AB; --g){n[u++ ]=j[g];}}n[u++ ]=j[EB];j=n;GB();}GB();while (FB){FB=false;for(int g=0;g<zF-3; ++g){for(int h=g+1;h<zF-2; ++h){for(int i=h+1;i<zF-1; ++i){if(o(g,g+1,h,i,h+1,i+1)-l<-BC){s(g,g+1,h,i,h+1,i+1);}if(o(g,h,g+1,h+1,i,i+1)-l<-BC){s(g,h,g+1,h+1,i,i+1);}if(o(g,h,g+1,i,h+1,i+1)-l<-BC){s(g,h,g+1,i,h+1,i+1);}if(o(g,h+1,i,g+1,h,i+1)-l<-BC){s(g,h+1,i,g+1,h,i+1);}if(o(g,h+1,i,h,g+1,i+1)-l<-BC){s(g,h+1,i,h,g+1,i+1);}if(o(g,i,h+1,g+1,h,i+1)-l<-BC){s(g,i,h+1,g+1,h,i+1);}if(o(g,i,h+1,h,g+1,i+1)-l<-BC){s(g,i,h+1,h,g+1,i+1);}}}}};FG=j;GG=l;}}class QC{List<int> points;double DC;QC(this.points,this.DC);}class GD<EE,FE>{final EE fD;final FE tC;const GD(this.fD,this.tC);}class nB{double qB;List<int> bB;List<bool> gC;nB(){qB=0.0;}void reset(int g){qB=0.0;gC=new List<bool>.filled(g,false);gC[0]=true;bB=<int>[0];}}void main(){pD g=new pD();g.hE();gB.context['ymaps'].callMethod('ready',[()=>new zE()]);}class SC{int length;final int byteOrder;SC({int size: VC,this.byteOrder: ID}):WG=new HB.Uint8List(size==null?VC:size),length=0;List<int> cD(){return new HB.Uint8List.view(WG.buffer,0,length);}void clear(){WG=new HB.Uint8List(VC);length=0;}void NB(int g){if(length==WG.length){kG();}WG[length++ ]=g&0xff;}void hC(List<int> h,[int g]){if(g==null){g=h.length;}while (length+g>WG.length){kG((length+g)-WG.length);}WG.setRange(length,length+g,h);length+= g;}void BD(int g){if(byteOrder==TC){NB((g>>24)&0xff);NB((g>>16)&0xff);NB((g>>8)&0xff);NB((g)&0xff);return;}NB((g)&0xff);NB((g>>8)&0xff);NB((g>>16)&0xff);NB((g>>24)&0xff);}void kG([int g]){int h=VC;if(g!=null){if(g>h){h=g;}}HB.Uint8List i=new HB.Uint8List(WG.length+h);i.setRange(0,WG.length,WG);WG=i;}static const int VC=0x8000;HB.Uint8List WG;}class GE{SC eB;GE(this.eB);void NB(int g)=>VB(8,g);void hC(List<int> h){for(int g=0;g<h.length; ++g){VB(8,h[g]);}}void BD(int g){VB(32,g);}void VB(int h,int g){if(XG==8&&h==8){eB.NB(g&0xff);return;}if(XG==8&&h==16){eB.NB((g>>8)&0xff);eB.NB(g&0xff);return;}if(XG==8&&h==24){eB.NB((g>>16)&0xff);eB.NB((g>>8)&0xff);eB.NB(g&0xff);return;}if(XG==8&&h==32){eB.NB((g>>24)&0xff);eB.NB((g>>16)&0xff);eB.NB((g>>8)&0xff);eB.NB(g&0xff);return;}while (h>0){h-- ;int i=(g>>h)&0x1;YG=(YG<<1)|i;XG-- ;if(XG==0){eB.NB(YG);XG=8;YG=0;}}}void flush(){if(XG!=8){VB(XG,0);}}int YG=0;int XG=8;}class RC{mC input;RC(this.input);int YB()=>aB(8);int aB(int g){if(g==0){return 0;}if(XG==0){XG=8;YG=input.YB();}int h=0;while (g>XG){h=(h<<XG)+(YG&ND[XG]);g-= XG;XG=8;YG=input.YB();}if(g>0){if(XG==0){XG=8;YG=input.YB();}h=(h<<g)+(YG>>(XG-g)&ND[g]);XG-= g;}return h;}int YG=0;int XG=0;static const List<int> ND=const[0,1,3,7,15,31,63,127,255];}class UB{static int HD=0xffffffff;static int CC(int h,int g){return ((g<<8)^HE[(g>>24)&0xff^(h&0xff)])&0xffffffff;}static int JD(int g){return g^0xffffffff;}static const List<int> UC=const[0x42,0x5a,0x68];static const int KD=0x30;static const List<int> LD=const[0x31,0x41,0x59,0x26,0x53,0x59];static const List<int> MD=const[0x17,0x72,0x45,0x38,0x50,0x90];static const List<int> HE=const[0x00000000,0x04c11db7,0x09823b6e,0x0d4326d9,0x130476dc,0x17c56b6b,0x1a864db2,0x1e475005,0x2608edb8,0x22c9f00f,0x2f8ad6d6,0x2b4bcb61,0x350c9b64,0x31cd86d3,0x3c8ea00a,0x384fbdbd,0x4c11db70,0x48d0c6c7,0x4593e01e,0x4152fda9,0x5f15adac,0x5bd4b01b,0x569796c2,0x52568b75,0x6a1936c8,0x6ed82b7f,0x639b0da6,0x675a1011,0x791d4014,0x7ddc5da3,0x709f7b7a,0x745e66cd,0x9823b6e0,0x9ce2ab57,0x91a18d8e,0x95609039,0x8b27c03c,0x8fe6dd8b,0x82a5fb52,0x8664e6e5,0xbe2b5b58,0xbaea46ef,0xb7a96036,0xb3687d81,0xad2f2d84,0xa9ee3033,0xa4ad16ea,0xa06c0b5d,0xd4326d90,0xd0f37027,0xddb056fe,0xd9714b49,0xc7361b4c,0xc3f706fb,0xceb42022,0xca753d95,0xf23a8028,0xf6fb9d9f,0xfbb8bb46,0xff79a6f1,0xe13ef6f4,0xe5ffeb43,0xe8bccd9a,0xec7dd02d,0x34867077,0x30476dc0,0x3d044b19,0x39c556ae,0x278206ab,0x23431b1c,0x2e003dc5,0x2ac12072,0x128e9dcf,0x164f8078,0x1b0ca6a1,0x1fcdbb16,0x018aeb13,0x054bf6a4,0x0808d07d,0x0cc9cdca,0x7897ab07,0x7c56b6b0,0x71159069,0x75d48dde,0x6b93dddb,0x6f52c06c,0x6211e6b5,0x66d0fb02,0x5e9f46bf,0x5a5e5b08,0x571d7dd1,0x53dc6066,0x4d9b3063,0x495a2dd4,0x44190b0d,0x40d816ba,0xaca5c697,0xa864db20,0xa527fdf9,0xa1e6e04e,0xbfa1b04b,0xbb60adfc,0xb6238b25,0xb2e29692,0x8aad2b2f,0x8e6c3698,0x832f1041,0x87ee0df6,0x99a95df3,0x9d684044,0x902b669d,0x94ea7b2a,0xe0b41de7,0xe4750050,0xe9362689,0xedf73b3e,0xf3b06b3b,0xf771768c,0xfa325055,0xfef34de2,0xc6bcf05f,0xc27dede8,0xcf3ecb31,0xcbffd686,0xd5b88683,0xd1799b34,0xdc3abded,0xd8fba05a,0x690ce0ee,0x6dcdfd59,0x608edb80,0x644fc637,0x7a089632,0x7ec98b85,0x738aad5c,0x774bb0eb,0x4f040d56,0x4bc510e1,0x46863638,0x42472b8f,0x5c007b8a,0x58c1663d,0x558240e4,0x51435d53,0x251d3b9e,0x21dc2629,0x2c9f00f0,0x285e1d47,0x36194d42,0x32d850f5,0x3f9b762c,0x3b5a6b9b,0x0315d626,0x07d4cb91,0x0a97ed48,0x0e56f0ff,0x1011a0fa,0x14d0bd4d,0x19939b94,0x1d528623,0xf12f560e,0xf5ee4bb9,0xf8ad6d60,0xfc6c70d7,0xe22b20d2,0xe6ea3d65,0xeba91bbc,0xef68060b,0xd727bbb6,0xd3e6a601,0xdea580d8,0xda649d6f,0xc423cd6a,0xc0e2d0dd,0xcda1f604,0xc960ebb3,0xbd3e8d7e,0xb9ff90c9,0xb4bcb610,0xb07daba7,0xae3afba2,0xaafbe615,0xa7b8c0cc,0xa379dd7b,0x9b3660c6,0x9ff77d71,0x92b45ba8,0x9675461f,0x8832161a,0x8cf30bad,0x81b02d74,0x857130c3,0x5d8a9099,0x594b8d2e,0x5408abf7,0x50c9b640,0x4e8ee645,0x4a4ffbf2,0x470cdd2b,0x43cdc09c,0x7b827d21,0x7f436096,0x7200464f,0x76c15bf8,0x68860bfd,0x6c47164a,0x61043093,0x65c52d24,0x119b4be9,0x155a565e,0x18197087,0x1cd86d30,0x029f3d35,0x065e2082,0x0b1d065b,0x0fdc1bec,0x3793a651,0x3352bbe6,0x3e119d3f,0x3ad08088,0x2497d08d,0x2056cd3a,0x2d15ebe3,0x29d4f654,0xc5a92679,0xc1683bce,0xcc2b1d17,0xc8ea00a0,0xd6ad50a5,0xd26c4d12,0xdf2f6bcb,0xdbee767c,0xe3a1cbc1,0xe760d676,0xea23f0af,0xeee2ed18,0xf0a5bd1d,0xf464a0aa,0xf9278673,0xfde69bc4,0x89b8fd09,0x8d79e0be,0x803ac667,0x84fbdbd0,0x9abc8bd5,0x9e7d9662,0x933eb0bb,0x97ffad0c,0xafb010b1,0xab710d06,0xa6322bdf,0xa2f33668,0xbcb4666d,0xb8757bda,0xb5365d03,0xb1f740b4];}const int ID=0;const int TC=1;class mC{final List<int> buffer;int offset;final int start;final int byteOrder;mC(g,{this.byteOrder: ID,int start: 0,int length}):this.buffer=g is HB.ByteData?new HB.Uint8List.view(g):g,this.start=start{aG=length==null?g.length:length;offset=start;}int get length=>aG-(offset-start);bool get eD=>offset>=(start+aG);void reset(){offset=start;}int operator[](int g)=>buffer[offset+g];int indexOf(int h,[int i=0]){for(int g=this.offset+i,j=this.offset+length;g<j; ++g){if(buffer[g]==h){return g-this.start;}}return -1;}void skip(int g){offset+= g;}int YB(){return buffer[offset++ ];}int aG;}class BF implements Exception{final String message;BF(this.message);String toString()=>"ArchiveException: ${message}";}class CF{List<int> cE(List<int> g,{bool verify: true}){return bE(new mC(g,byteOrder:TC),verify:verify);}List<int> bE(mC ZG,{bool verify: false}){SC l=new SC();RC g=new RC(ZG);cG=0;dG=0;fG=0;gG=0;if(g.YB()!=UB.UC[0]||g.YB()!=UB.UC[1]||g.YB()!=UB.UC[2]){throw new BF('Invalid Signature');}nG=g.YB()-UB.KD;if(nG<0||nG>9){throw new BF('Invalid BlockSize');}tG=new HB.Uint32List(nG*100000);int j=0;while (true){int m=wG(g);if(m==PD){int i=0;i=(i<<8)|g.YB();i=(i<<8)|g.YB();i=(i<<8)|g.YB();i=(i<<8)|g.YB();int k=zG(g,l);k=UB.JD(k);if(verify&&k!=i){throw new BF('Invalid block checksum.');}j=((j<<1)|(j>>31))&0xffffffff;j^= k;}else if(m==QD){int h=0;h=(h<<8)|g.YB();h=(h<<8)|g.YB();h=(h<<8)|g.YB();h=(h<<8)|g.YB();if(verify&&h!=j){throw new BF('Invalid combined checksum: ${j} : ${h}');}return l.cD();}}return null;}int wG(RC k){bool i=true;bool h=true;for(int g=0;g<6; ++g){int j=k.YB();if(j!=UB.LD[g]){h=false;}if(j!=UB.MD[g]){i=false;}if(!i&&!h){throw new BF('Invalid Block Signature');}}return (h)?PD:QD;}int zG(RC n,SC rB){int iC=n.aB(1);int OB=n.aB(8);OB=(OB<<8)|n.aB(8);OB=(OB<<8)|n.aB(8);MH=new HB.Uint8List(16);for(int g=0;g<16; ++g){MH[g]=n.aB(1);}BH=new HB.Uint8List(256);for(int g=0,jC=0;g<16; ++g,jC+= 16){if(MH[g]!=0){for(int MB=0;MB<16; ++MB){BH[jC+MB]=n.aB(1);}}}OH();if(PH==0){throw new BF('Data error');}int FC=PH+2;int WB=n.aB(3);if(WB<2||WB>6){throw new BF('Data error');}RH=n.aB(15);if(RH<1){throw new BF('Data error');}sG=new HB.Uint8List(OD);rG=new HB.Uint8List(OD);for(int g=0;g<RH; ++g){int MB=0;while (true){int ZB=n.aB(1);if(ZB==0){break;}MB++ ;if(MB>=WB){throw new BF('Data error');}}sG[g]=MB;}HB.Uint8List cB=new HB.Uint8List(wB);for(int g=0;g<WB; ++g){cB[g]=g;}for(int g=0;g<RH; ++g){int kB=sG[g];int kC=cB[kB];while (kB>0){cB[kB]=cB[kB-1];kB-- ;}cB[0]=kC;rG[g]=kC;}uG=new List<HB.Uint8List>(wB);for(int m=0;m<WB; ++m){uG[m]=new HB.Uint8List(hB);int XB=n.aB(5);for(int g=0;g<FC; ++g){while (true){if(XB<1||XB>20){throw new BF('Data error');}int ZB=n.aB(1);if(ZB==0){break;}ZB=n.aB(1);if(ZB==0){XB++ ;}else{XB-- ;}}uG[m][g]=XB;}}UH=new List<HB.Int32List>(wB);VH=new List<HB.Int32List>(wB);WH=new List<HB.Int32List>(wB);XH=new HB.Int32List(wB);for(int m=0;m<WB;m++ ){UH[m]=new HB.Int32List(hB);VH[m]=new HB.Int32List(hB);WH[m]=new HB.Int32List(hB);int tB=32;int GC=0;for(int g=0;g<FC; ++g){if(uG[m][g]>GC){GC=uG[m][g];}if(uG[m][g]<tB){tB=uG[m][g];}}YH(UH[m],VH[m],WH[m],uG[m],tB,GC,FC);XH[m]=tB;}int CD=PH+1;int MC=100000*nG;int mD=-1;int nD=0;ZH=new HB.Int32List(256);aH=new HB.Uint8List(oC);bH=new HB.Int32List(256~/oB);int SB=oC-1;for(int FB=256~/oB-1;FB>=0;FB-- ){for(int TB=oB-1;TB>=0;TB-- ){aH[SB]=FB*oB+TB;SB-- ;}bH[FB]=SB+1;}int BB=0;cG=0;dG=-1;int DB=cH(n);int v=0;while (true){if(DB==CD){break;}if(DB==XC||DB==YC){int JB=-1;int lB=1;do{if(lB>=2*1024*1024){throw new BF('Data error');}if(DB==XC){JB=JB+(0+1)*lB;}else if(DB==YC){JB=JB+(1+1)*lB;}lB=lB*2;DB=cH(n);}while(DB==XC||DB==YC);JB++ ;v=dH[aH[bH[0]]];ZH[v]+=JB;while (JB>0){if(BB>=MC){throw new BF('Data error');}tG[BB]=v;BB++ ;JB-- ;};continue;}else{if(BB>=MC){throw new BF('Data error');}int AB=DB-1;if(AB<oB){int CB=bH[0];v=aH[CB+AB];while (AB>3){int KB=CB+AB;aH[(KB)]=aH[(KB)-1];aH[(KB)-1]=aH[(KB)-2];aH[(KB)-2]=aH[(KB)-3];aH[(KB)-3]=aH[(KB)-4];AB-= 4;}while (AB>0){aH[(CB+AB)]=aH[(CB+AB)-1];AB-- ;}aH[CB]=v;}else{int LB=AB~/oB;int DD=AB%oB;int CB=bH[LB]+DD;v=aH[CB];while (CB>bH[LB]){aH[CB]=aH[CB-1];CB-- ;}bH[LB]++;while (LB>0){bH[LB]--;aH[bH[LB]]=aH[bH[LB-1]+oB-1];LB-- ;}bH[0]--;aH[bH[0]]=v;if(bH[0]==0){SB=oC-1;for(int FB=256~/oB-1;FB>=0;FB-- ){for(int TB=oB-1;TB>=0;TB-- ){aH[SB]=aH[bH[FB]+TB];SB-- ;}bH[FB]=SB+1;}}}ZH[dH[v]]++;tG[BB]=(dH[v]);BB++ ;DB=cH(n);continue;}}if(OB<0||OB>=BB){throw new BF('Data error');}for(int g=0;g<=255;g++ ){if(ZH[g]<0||ZH[g]>BB){throw new BF('Data error');}}eH=new HB.Int32List(257);eH[0]=0;for(int g=1;g<=256;g++ ){eH[g]=ZH[g-1];}for(int g=1;g<=256;g++ ){eH[g]+=eH[g-1];}for(int g=0;g<=256;g++ ){if(eH[g]<0||eH[g]>BB){throw new BF('Data error');}}for(int g=1;g<=256;g++ ){if(eH[g-1]>eH[g]){throw new BF('Data error');}}for(int g=0;g<BB;g++ ){v=(tG[g]&0xff);tG[eH[v]]|=(g<<8);eH[v]++;}int q=UB.HD;int h=tG[OB]>>8;int HC=0;int s;int k=0;int j=0;if(iC!=0){k=0;j=0;if(h>=100000*nG){throw new BF('Data error');}h=tG[h];s=h&0xff;h>>= 8;HC++ ;if(k==0){k=IC[j];j++ ;if(j==512){j=0;}}k-- ;s^= ((k==1)?1:0);}else{if(h>=100000*nG){return q;}h=tG[h];s=(h&0xff);h>>= 8;HC++ ;}int o=0;int u=0;int EB=BB+1;int l=HC;int GB=s;int i;if(iC!=0){while (true){while (true){if(o==0){break;}rB.NB(u);q=UB.CC(u,q);o-- ;}if(l==EB){return q;}if(l>EB){throw new BF('Data error.');}o=1;u=s;h=tG[h];i=h&0xff;h>>= 8;if(k==0){k=IC[j];j++ ;if(j==512){j=0;}}k-- ;i^= ((k==1)?1:0);l++ ;if(l==EB){continue;}if(i!=s){s=i;continue;}o=2;h=tG[h];i=h&0xff;h>>= 8;if(k==0){k=IC[j];j++ ;if(j==512){j=0;}}i^= ((k==1)?1:0);l++ ;if(l==EB){continue;}if(i!=s){s=i;continue;}o=3;h=tG[h];i=h&0xff;h>>= 8;if(k==0){k=IC[j];j++ ;if(j==512){j=0;}}i^= ((k==1)?1:0);l++ ;if(l==EB){continue;}if(i!=s){s=i;continue;}h=tG[h];i=h&0xff;h>>= 8;if(k==0){k=IC[j];j++ ;if(j==512){j=0;}}i^= ((k==1)?1:0);l++ ;o=i+4;h=tG[h];s=h&0xff;h>>= 8;if(k==0){k=IC[j];j++ ;if(j==512){j=0;}}s^= ((k==1)?1:0);l++ ;}}else{while (true){if(o>0){while (true){if(o==1){break;}rB.NB(u);q=UB.CC(u,q);o-- ;}rB.NB(u);q=UB.CC(u,q);}if(l>EB){throw new BF('Data error');}if(l==EB){o=0;return q;}u=GB;int i;if(h>=100000*nG){throw new BF('Data Error');}h=tG[h];i=h&0xff;h>>= 8;l++ ;if(i!=GB){GB=i;rB.NB(u);q=UB.CC(u,q);o=0;continue;}if(l==EB){rB.NB(u);q=UB.CC(u,q);o=0;continue;}o=2;if(h>=100000*nG){throw new BF('Data Error');}h=tG[h];i=h&0xff;h>>= 8;l++ ;if(l==EB){continue;}if(i!=GB){GB=i;continue;}o=3;if(h>=100000*nG){throw new BF('Data Error');}h=tG[h];i=h&0xff;h>>= 8;l++ ;if(l==EB){continue;}if(i!=GB){GB=i;continue;}if(h>=100000*nG){throw new BF('Data Error');}h=tG[h];i=h&0xff;h>>= 8;l++ ;o=i+4;if(h>=100000*nG){throw new BF('Data Error');}h=tG[h];GB=h&0xff;h>>= 8;l++ ;}}return q;}int cH(RC i){if(cG==0){dG++ ;if(dG>=RH){throw new BF('Data error');}cG=ZC;fG=rG[dG];gG=XH[fG];hH=UH[fG];iH=WH[fG];jH=VH[fG];}cG-- ;int g=gG;int h=i.aB(g);while (true){if(g>20){throw new BF('Data error');}if(h<=hH[g]){break;}g++ ;int j=i.aB(1);h=(h<<1)|j;}if(h-jH[g]<0||h-jH[g]>=hB){throw new BF('Data error');}return iH[h-jH[g]];}void YH(HB.Int32List j,HB.Int32List h,HB.Int32List s,HB.Uint8List n,int k,int l,int o){int q=0;for(int g=k;g<=l;g++ ){for(int i=0;i<o;i++ ){if(n[i]==g){s[q]=i;q++ ;}}}for(int g=0;g<nC;g++ ){h[g]=0;}for(int g=0;g<o;g++ ){h[n[g]+1]++;}for(int g=1;g<nC;g++ ){h[g]+=h[g-1];}for(int g=0;g<nC;g++ ){j[g]=0;}int m=0;for(int g=k;g<=l;g++ ){m+= (h[g+1]-h[g]);j[g]=m-1;m<<= 1;}for(int g=k+1;g<=l;g++ ){h[g]=((j[g-1]+1)<<1)-h[g];}}void OH(){PH=0;dH=new HB.Uint8List(256);for(int g=0;g<256; ++g){if(BH[g]!=0){dH[PH++ ]=g;}}}int nG;HB.Uint32List tG;HB.Uint8List MH;HB.Uint8List BH;HB.Uint8List dH;HB.Uint8List aH;HB.Int32List bH;HB.Uint8List sG;HB.Uint8List rG;List<HB.Int32List> UH;List<HB.Int32List> VH;List<HB.Int32List> WH;HB.Int32List XH;HB.Int32List ZH;int RH;int cG=0;int dG=-1;int fG=0;int gG=0;HB.Int32List hH;HB.Int32List iH;HB.Int32List jH;HB.Int32List eH;List<HB.Uint8List> uG;int PH=0;int nH;static const int wB=6;static const int ZC=50;static const int hB=258;static const int nC=23;static const int OD=(2+(900000~/ZC));static const int oC=4096;static const int oB=16;static const int XC=0;static const int YC=1;static const int PD=0;static const int QD=2;static const List<int> IC=const[619,720,127,481,931,816,813,233,566,247,985,724,205,454,863,491,741,242,949,214,733,859,335,708,621,574,73,654,730,472,419,436,278,496,867,210,399,680,480,51,878,465,811,169,869,675,611,697,867,561,862,687,507,283,482,129,807,591,733,623,150,238,59,379,684,877,625,169,643,105,170,607,520,932,727,476,693,425,174,647,73,122,335,530,442,853,695,249,445,515,909,545,703,919,874,474,882,500,594,612,641,801,220,162,819,984,589,513,495,799,161,604,958,533,221,400,386,867,600,782,382,596,414,171,516,375,682,485,911,276,98,553,163,354,666,933,424,341,533,870,227,730,475,186,263,647,537,686,600,224,469,68,770,919,190,373,294,822,808,206,184,943,795,384,383,461,404,758,839,887,715,67,618,276,204,918,873,777,604,560,951,160,578,722,79,804,96,409,713,940,652,934,970,447,318,353,859,672,112,785,645,863,803,350,139,93,354,99,820,908,609,772,154,274,580,184,79,626,630,742,653,282,762,623,680,81,927,626,789,125,411,521,938,300,821,78,343,175,128,250,170,774,972,275,999,639,495,78,352,126,857,956,358,619,580,124,737,594,701,612,669,112,134,694,363,992,809,743,168,974,944,375,748,52,600,747,642,182,862,81,344,805,988,739,511,655,814,334,249,515,897,955,664,981,649,113,974,459,893,228,433,837,553,268,926,240,102,654,459,51,686,754,806,760,493,403,415,394,687,700,946,670,656,610,738,392,760,799,887,653,978,321,576,617,626,502,894,679,243,440,680,879,194,572,640,724,926,56,204,700,707,151,457,449,797,195,791,558,945,679,297,59,87,824,713,663,412,693,342,606,134,108,571,364,631,212,174,643,304,329,343,97,430,751,497,314,983,374,822,928,140,206,73,263,980,736,876,478,430,305,170,514,364,692,829,82,855,953,676,246,369,970,294,750,807,827,150,790,288,923,804,378,215,828,592,281,565,555,710,82,896,831,547,261,524,462,293,465,502,56,661,821,976,991,658,869,905,758,745,193,768,550,608,933,378,286,215,979,792,961,61,688,793,644,986,403,106,366,905,644,372,567,466,434,645,210,389,550,919,135,780,773,635,389,707,100,626,958,165,504,920,176,193,713,857,265,203,50,668,108,645,990,626,197,510,357,358,850,858,364,936,638];}class DF{List<int> encode(List<int> l){input=new mC(l,byteOrder:TC);SC j=new SC(byteOrder:TC);PB=new GE(j);final int i=9;PB.hC(UB.UC);PB.NB(UB.KD+i);bG=100000*i-19;eG=30;int h=0;int k=100000*i;hG=new HB.Uint32List(k);iG=new HB.Uint32List(k+WC);jG=new HB.Uint32List(65537);lG=new HB.Uint8List.view(iG.buffer);mG=new HB.Uint16List.view(hG.buffer);oG=new HB.Uint8List(256);pG=0;qG=0;rG=new HB.Uint8List(OD);sG=new HB.Uint8List(OD);uG=new List<HB.Uint8List>(wB);vG=new List<HB.Int32List>(wB);xG=new List<HB.Int32List>(wB);for(int g=0;g<wB; ++g){uG[g]=new HB.Uint8List(hB);vG[g]=new HB.Int32List(hB);xG[g]=new HB.Int32List(hB);}yG=new List<HB.Uint32List>(hB);for(int g=0;g<hB; ++g){yG[g]=new HB.Uint32List(4);}while (!input.eD){int m=AH();h=((h<<1)|(h>>31))&0xffffffff;h^= m;pG++ ;}PB.hC(UB.MD);PB.BD(h);PB.flush();return j.cD();}int AH(){BH=new HB.Uint8List(256);CH=0;DH=UB.HD;EH=256;FH=0;while (CH<bG&&!input.eD){GH(input.YB());}if(EH<256){HH();}EH=256;FH=0;DH=UB.JD(DH);IH();return DH;}void IH(){if(CH>0){JH();}if(CH>0){PB.hC(UB.LD);PB.BD(DH);PB.VB(1,0);PB.VB(24,qG);KH();LH();}}void KH(){HB.Uint8List j=new HB.Uint8List(256);NH=0;for(int h=0;h<256;h++ ){if(BH[h]!=0){oG[h]=NH;NH++ ;}}final int o=NH+1;QH=new HB.Int32List(hB);int i=0;int g=0;for(int h=0;h<NH;h++ ){j[h]=h;}for(int h=0;h<CH;h++ ){SH(i<=h);int k=hG[h]-1;if(k<0){k+= CH;}int n=oG[lG[k]];SH(n<NH);if(j[0]==n){g++ ;}else{if(g>0){g-- ;while (true){if(g&1!=0){mG[i]=YC;i++ ;QH[YC]++;}else{mG[i]=XC;i++ ;QH[XC]++;}if(g<2){break;}g=(g-2)~/2;}g=0;}int l=j[1];j[1]=j[0];int m=1;int q=n;while (q!=l){m++ ;int s=l;l=j[m];j[m]=s;}j[0]=l;k=m;mG[i]=k+1;i++ ;QH[k+1]++;}}if(g>0){g-- ;while (true){if(g&1!=0){mG[i]=YC;i++ ;QH[YC]++;}else{mG[i]=XC;i++ ;QH[XC]++;}if(g<2){break;}g=(g-2)~/2;}g=0;}mG[i]=o;i++ ;QH[o]++;TH=i;}void LH(){HB.Uint16List s=new HB.Uint16List(wB);HB.Int32List lB=new HB.Int32List(wB);int u=0;int v=NH+2;for(int k=0;k<wB;k++ ){for(int l=0;l<v;l++ ){uG[k][l]=SD;}}int m;SH(TH>0);if(TH<200){m=2;}else if(TH<600){m=3;}else if(TH<1200){m=4;}else if(TH<2400){m=5;}else{m=6;}int AB=m;int kB=TH;int o=0;int n=0;while (AB>0){int FC=kB~/AB;int KB=0;n=o-1;while (KB<FC&&n<v-1){n++ ;KB+= QH[n];}if(n>o&&AB!=m&&AB!=1&&((m-AB)%2==1)){KB-= QH[n];n-- ;}for(int l=0;l<v;l++ ){if(l>=o&&l<=n){uG[AB-1][l]=KE;}else{uG[AB-1][l]=SD;}}AB-- ;o=n+1;kB-= KB;}for(int cB=0;cB<JE;cB++ ){for(int k=0;k<m;k++ ){lB[k]=0;}for(int k=0;k<m;k++ ){for(int l=0;l<v;l++ ){xG[k][l]=0;}}if(m==6){for(int l=0;l<v;l++ ){yG[l][0]=(uG[1][l]<<16)|uG[0][l];yG[l][1]=(uG[3][l]<<16)|uG[2][l];yG[l][2]=(uG[5][l]<<16)|uG[4][l];}}u=0;int HC=0;o=0;while (true){if(o>=TH){break;}int n=o+ZC-1;if(n>=TH){n=TH-1;}for(int k=0;k<m;k++ ){s[k]=0;}if(m==6&&50==n-o+1){int WB=0;int TB=0;int SB=0;void j(int CB){int FB=mG[o+CB];WB+= yG[FB][0];TB+= yG[FB][1];SB+= yG[FB][2];}j(0);j(1);j(2);j(3);j(4);j(5);j(6);j(7);j(8);j(9);j(10);j(11);j(12);j(13);j(14);j(15);j(16);j(17);j(18);j(19);j(20);j(21);j(22);j(23);j(24);j(25);j(26);j(27);j(28);j(29);j(30);j(31);j(32);j(33);j(34);j(35);j(36);j(37);j(38);j(39);j(40);j(41);j(42);j(43);j(44);j(45);j(46);j(47);j(48);j(49);s[0]=WB&0xffff;s[1]=WB>>16;s[2]=TB&0xffff;s[3]=TB>>16;s[4]=SB&0xffff;s[5]=SB>>16;}else{for(int g=o;g<=n;g++ ){int FB=mG[g];for(int k=0;k<m;k++ ){s[k]+=uG[k][FB];}}}int ZB=999999999;int GB=-1;for(int k=0;k<m;k++ ){if(s[k]<ZB){ZB=s[k];GB=k;}}HC+= ZB;lB[GB]++;rG[u]=GB;u++ ;if(m==6&&50==n-o+1){void h(int CB){xG[GB][mG[o+CB]]++;}h(0);h(1);h(2);h(3);h(4);h(5);h(6);h(7);h(8);h(9);h(10);h(11);h(12);h(13);h(14);h(15);h(16);h(17);h(18);h(19);h(20);h(21);h(22);h(23);h(24);h(25);h(26);h(27);h(28);h(29);h(30);h(31);h(32);h(33);h(34);h(35);h(36);h(37);h(38);h(39);h(40);h(41);h(42);h(43);h(44);h(45);h(46);h(47);h(48);h(49);}else{for(int g=o;g<=n;g++ ){xG[GB][mG[g]]++;}}o=n+1;}for(int k=0;k<m;k++ ){fH(uG[k],xG[k],v,17);}}SH(m<8);SH(u<32768&&u<=(2+(900000~/ZC)));HB.Uint8List EB=new HB.Uint8List(wB);for(int g=0;g<m;g++ ){EB[g]=g;}for(int g=0;g<u;g++ ){int rB=rG[g];int q=0;int MB=EB[q];while (rB!=MB){q++ ;int tB=MB;MB=EB[q];EB[q]=tB;}EB[0]=MB;sG[g]=q;}for(int k=0;k<m;k++ ){int LB=32;int JB=0;for(int g=0;g<v;g++ ){if(uG[k][g]>JB){JB=uG[k][g];}if(uG[k][g]<LB){LB=uG[k][g];}}SH(!(JB>17));SH(!(LB<1));gH(vG[k],uG[k],LB,JB,v);}HB.Uint8List OB=new HB.Uint8List(16);for(int g=0;g<16;g++ ){OB[g]=0;for(int q=0;q<16;q++ ){if(BH[g*16+q]!=0){OB[g]=1;}}}for(int g=0;g<16;g++ ){if(OB[g]!=0){PB.VB(1,1);}else{PB.VB(1,0);}}for(int g=0;g<16;g++ ){if(OB[g]!=0){for(int q=0;q<16;q++ ){if(BH[g*16+q]!=0){PB.VB(1,1);}else{PB.VB(1,0);}}}}PB.VB(3,m);PB.VB(15,u);for(int g=0;g<u;g++ ){for(int q=0;q<sG[g];q++ ){PB.VB(1,1);}PB.VB(1,0);}for(int k=0;k<m;k++ ){int DB=uG[k][0];PB.VB(5,DB);for(int g=0;g<v;g++ ){while (DB<uG[k][g]){PB.VB(2,2);DB++ ;}while (DB>uG[k][g]){PB.VB(2,3);DB-- ;}PB.VB(1,0);}}int BB=0;o=0;while (true){if(o>=TH){break;}int n=o+ZC-1;if(n>=TH){n=TH-1;}SH(rG[BB]<m);if(m==6&&50==n-o+1){int XB;HB.Uint8List GC=uG[rG[BB]];HB.Int32List MC=vG[rG[BB]];void i(int CB){XB=mG[o+CB];PB.VB(GC[XB],MC[XB]);}i(0);i(1);i(2);i(3);i(4);i(5);i(6);i(7);i(8);i(9);i(10);i(11);i(12);i(13);i(14);i(15);i(16);i(17);i(18);i(19);i(20);i(21);i(22);i(23);i(24);i(25);i(26);i(27);i(28);i(29);i(30);i(31);i(32);i(33);i(34);i(35);i(36);i(37);i(38);i(39);i(40);i(41);i(42);i(43);i(44);i(45);i(46);i(47);i(48);i(49);}else{for(int g=o;g<=n;g++ ){PB.VB(uG[rG[BB]][mG[g]],vG[rG[BB]][mG[g]]);}}o=n+1;BB++ ;}SH(BB==u);}void fH(HB.Uint8List SB,HB.Int32List AB,int q,int TB){HB.Int32List g=new HB.Int32List(hB+2);HB.Int32List j=new HB.Int32List(hB*2);HB.Int32List m=new HB.Int32List(hB*2);int i;int n;for(int h=0;h<q;h++ ){j[h+1]=(AB[h]==0?1:AB[h])<<8;}void BB(int u){int k=u;int s=g[k];while (j[s]<j[g[k>>1]]){g[k]=g[k>>1];k>>= 1;}g[k]=s;}void CB(int u){int k=u;int s=g[k];while (true){int l=k<<1;if(l>i){break;}if(l<i&&j[g[l+1]]<j[g[l]]){l++ ;}if(j[s]<j[g[l]]){break;}g[k]=g[l];k=l;}g[k]=s;}int DB(int WB)=>((WB)&0xffffff00);int EB(int XB)=>((XB)&0x000000ff);int ZB(int FB,int GB)=>((FB)>(GB)?(FB):(GB));int cB(int JB,int KB)=>(DB(JB)+DB(KB))|(1+ZB(EB(JB),EB(KB)));while (true){n=q;i=0;g[0]=0;j[0]=0;m[0]=-2;for(int h=1;h<=q;h++ ){m[h]=-1;i++ ;g[i]=h;BB(i);}SH(i<(hB+2));while (i>1){int LB=g[1];g[1]=g[i];i-- ;CB(1);int MB=g[1];g[1]=g[i];i-- ;CB(1);n++ ;m[LB]=m[MB]=n;j[n]=cB(j[LB],j[MB]);m[n]=-1;i++ ;g[i]=n;BB(i);}SH(n<(hB*2));bool OB=false;for(int h=1;h<=q;h++ ){int o=0;int v=h;while (m[v]>=0){v=m[v];o++ ;}SB[h-1]=o;if(o>TB){OB=true;}}if(!OB){break;}for(int h=1;h<=q;h++ ){int o=j[h]>>8;o=1+(o~/2);j[h]=o<<8;}}}void gH(HB.Int32List j,HB.Uint8List k,int l,int m,int n){int h=0;for(int i=l;i<=m;i++ ){for(int g=0;g<n;g++ ){if(k[g]==i){j[g]=h;h++ ;}}h<<= 1;}}void JH(){if(CH<10000){kH(hG,iG,jG,CH);}else{int g=CH+WC;if(g&1!=0){g++ ;}HB.Uint16List i=new HB.Uint16List.view(lG.buffer,g);int h=eG;if(h<1){h=1;}if(h>100){h=100;}int j=CH*((h-1)~/3);lH=j;mH(hG,lG,i,jG,CH);if(lH<0){kH(hG,iG,jG,CH);}}qG=-1;for(int g=0;g<CH;g++ ){if(hG[g]==0){qG=g;break;}}SH(qG!=-1);}void SH(bool g){if(!g){throw new BF('Data error');}}void kH(HB.Uint32List o,HB.Uint32List u,HB.Uint32List q,int j){HB.Int32List l=new HB.Int32List(257);HB.Int32List v=new HB.Int32List(256);HB.Uint8List AB=new HB.Uint8List.view(u.buffer);int BB(int i)=>q[i>>5]|=(1<<(i&31));int KB(int i)=>q[i>>5]&=~(1<<(i&31));bool m(int i)=>(q[i>>5]&(1<<(i&31))!=0);int DB(int i)=>q[(i)>>5];bool EB(int i)=>((i)&0x01f)!=0;for(int g=0;g<257;g++ ){l[g]=0;}for(int g=0;g<j;g++ ){l[AB[g]]++;}for(int g=0;g<256;g++ ){v[g]=l[g];}for(int g=1;g<257;g++ ){l[g]+=l[g-1];}for(int g=0;g<j;g++ ){int k=AB[g];int h=l[k]-1;l[k]=h;o[h]=g;}int LB=2+(j~/32);for(int g=0;g<LB;g++ ){q[g]=0;}for(int g=0;g<256;g++ ){BB(l[g]);}for(int g=0;g<32;g++ ){BB(j+2*g);KB(j+2*g+1);}int CB=1;while (true){int k=0;for(int g=0;g<j;g++ ){if(m(g)){k=g;}int h=o[g]-CB;if(h<0){h+= j;}u[h]=k;}int FB=0;int n=-1;while (true){int h=n+1;while (m(h)&&EB(h)){h++ ;}if(m(h)){while (DB(h)==0xffffffff){h+= 32;}while (m(h)){h++ ;}}int s=h-1;if(s>=j){break;}while (!m(h)&&EB(h)){h++ ;}if(!m(h)){while (DB(h)==0x00000000){h+= 32;}while (!m(h)){h++ ;}}n=h-1;if(n>=j){break;}if(n>s){FB+= (n-s+1);oH(o,u,s,n);int GB=-1;for(int g=s;g<=n;g++ ){int JB=u[o[g]];if(GB!=JB){BB(g);GB=JB;}}}}CB*= 2;if(CB>j||FB==0){break;}}int k=0;for(int g=0;g<j;g++ ){while (v[k]==0){k++ ;}v[k]--;AB[o[g]]=k;}SH(k<256);}void oH(HB.Uint32List g,HB.Uint32List s,int TB,int WB){const int XB=10;const int BB=100;HB.Int32List FB=new HB.Int32List(BB);HB.Int32List GB=new HB.Int32List(BB);int m=0;void v(int ZB,int cB){FB[m]=ZB;GB[m]=cB;m++ ;}int JB(int KB,int LB)=>((KB)<(LB))?(KB):(LB);void MB(CB,DB,OB){while (OB>0){int n=g[CB];g[CB]=g[DB];g[DB]=n;CB++ ;DB++ ;OB-- ;}}int EB=0;v(TB,WB);while (m>0){SH(m<BB-1);m-- ;int j=FB[m];int k=GB[m];if(k-j<XB){pH(g,s,j,k);continue;}EB=((EB*7621)+1)%32768;int SB=EB%3;int AB;if(SB==0){AB=s[g[j]];}else if(SB==1){AB=s[g[(j+k)>>1]];}else{AB=s[g[k]];}int h=j;int o=j;int i=k;int q=k;while (true){while (true){if(h>i){break;}int l=s[g[h]]-AB;if(l==0){int n=g[h];g[h]=g[o];g[o]=n;o++ ;h++ ;continue;}if(l>0){break;}h++ ;}while (true){if(h>i){break;}int l=s[g[i]]-AB;if(l==0){int n=g[i];g[i]=g[q];g[q]=n;q-- ;i-- ;continue;}if(l<0){break;}i-- ;}if(h>i){break;}int n=g[h];g[h]=g[i];g[i]=n;h++ ;i-- ;}SH(i==h-1);if(q<o){continue;}int l=JB(o-j,h-o);MB(j,h-l,l);int u=JB(k-q,q-i);MB(h,k-u+1,u);l=j+h-o-1;u=k-(q-i)+1;if(l-j>k-u){v(j,l);v(u,k);}else{v(u,k);v(j,l);}}}void pH(HB.Uint32List h,HB.Uint32List l,int m,int j){if(m==j){return;}if(j-m>3){for(int i=j-4;i>=m;i-- ){int k=h[i];int n=l[k];int g;for(g=i+4;g<=j&&n>l[h[g]];g+= 4){h[g-4]=h[g];}h[g-4]=k;}}for(int i=j-1;i>=m;i-- ){int k=h[i];int n=l[k];int g;for(g=i+1;g<=j&&n>l[h[g]];g++ ){h[g-1]=h[g];}h[g-1]=k;}}void mH(HB.Uint32List m,HB.Uint8List k,HB.Uint16List o,HB.Uint32List j,int q){HB.Int32List v=new HB.Int32List(256);HB.Uint8List AB=new HB.Uint8List(256);HB.Int32List BB=new HB.Int32List(256);HB.Int32List CB=new HB.Int32List(256);int OB(int SB)=>(jG[((SB)+1)<<8]-jG[(SB)<<8]);const int GB=2097152;const int u=4292870143;for(int h=65536;h>=0;h-- ){j[h]=0;}int g=k[0]<<8;int h=q-1;for(;h>=3;h-= 4){o[h]=0;g=(g>>8)|((k[h])<<8);j[g]++;o[h-1]=0;g=(g>>8)|((k[h-1])<<8);j[g]++;o[h-2]=0;g=(g>>8)|((k[h-2])<<8);j[g]++;o[h-3]=0;g=(g>>8)|((k[h-3])<<8);j[g]++;}for(;h>=0;h-- ){o[h]=0;g=(g>>8)|((k[h])<<8);j[g]++;}for(h=0;h<WC;h++ ){k[q+h]=k[h];o[q+h]=0;}for(h=1;h<=65536;h++ ){j[h]+=j[h-1];}int i=k[0]<<8;h=q-1;for(;h>=3;h-= 4){i=(i>>8)|(k[h]<<8);g=j[i]-1;j[i]=g;m[g]=h;i=(i>>8)|(k[h-1]<<8);g=j[i]-1;j[i]=g;m[g]=h-1;i=(i>>8)|(k[h-2]<<8);g=j[i]-1;j[i]=g;m[g]=h-2;i=(i>>8)|(k[h-3]<<8);g=j[i]-1;j[i]=g;m[g]=h-3;}for(;h>=0;h-- ){i=(i>>8)|(k[h]<<8);g=j[i]-1;j[i]=g;m[g]=h;}for(h=0;h<=255;h++ ){AB[h]=0;v[h]=h;}int n=1;do{n=3*n+1;}while(n<=256);do{n=n~/3;for(h=n;h<=255;h++ ){int TB=v[h];g=h;while (OB(v[g-n])>OB(TB)){v[g]=v[g-n];g=g-n;if(g<=(n-1)){break;}}v[g]=TB;}}while(n!=1);int ZB=0;for(h=0;h<=255;h++ ){int l=v[h];for(g=0;g<=255;g++ ){if(g!=l){int EB=(l<<8)+g;if((jG[EB]&GB)==0){int JB=jG[EB]&u;int KB=(jG[EB+1]&u)-1;if(KB>JB){qH(m,k,o,q,JB,KB,pC);ZB+= (KB-JB+1);if(lH<0){return;}}}jG[EB]|=GB;}}SH(AB[l]==0);for(g=0;g<=255;g++ ){BB[g]=jG[(g<<8)+l]&u;CB[g]=(jG[(g<<8)+l+1]&u)-1;}for(g=jG[l<<8]&u;g<BB[l];g++ ){int s=m[g]-1;if(s<0)s+= q;int DB=k[s];if(AB[DB]==0){m[BB[DB]++]=s;}}for(g=(jG[(l+1)<<8]&u)-1;g>CB[l];g-- ){int s=m[g]-1;if(s<0){s+= q;}int DB=k[s];if(AB[DB]==0){m[CB[DB]--]=s;}}SH((BB[l]-1==CB[l])||(BB[l]==0&&CB[l]==q-1));for(g=0;g<=255;g++ ){jG[(g<<8)+l]|=GB;}AB[l]=1;if(h<255){int WB=jG[l<<8]&u;int LB=(jG[(l+1)<<8]&u)-WB;int FB=0;while ((LB>>FB)>65534){FB++ ;}for(g=LB-1;g>=0;g-- ){int MB=m[WB+g];int XB=(g>>FB)&0xffff;o[MB]=XB;if(MB<WC)o[MB+q]=XB;}SH(((LB-1)>>FB)<=65535);}}}void qH(HB.Uint32List g,HB.Uint8List GB,HB.Uint16List nD,int DD,int CD,int iC,int jC){const MB=100;const kC=20;const MC=(pC+RD);HB.Int32List lB=new HB.Int32List(MB);HB.Int32List kB=new HB.Int32List(MB);HB.Int32List cB=new HB.Int32List(MB);HB.Int32List o=new HB.Int32List(3);HB.Int32List q=new HB.Int32List(3);HB.Int32List s=new HB.Int32List(3);int u=0;void JB(int GC,int FC,int HC){lB[u]=GC;kB[u]=FC;cB[u]=HC;u++ ;}int mD(int CB,int j,int WB){if(CB>j){int BB=CB;CB=j;j=BB;}if(j>WB){j=WB;if(CB>j){j=CB;}}return j;}void XB(int OB,int SB,int rB){while (rB>0){int BB=g[OB];g[OB]=g[SB];g[SB]=BB;OB++ ;SB++ ;rB-- ;}}int ZB(int CB,int j)=>((CB)<(j))?(CB):(j);int v(int AB)=>(q[AB]-o[AB]);void TB(int AB,int FB){int LB=o[AB];o[AB]=o[FB];o[FB]=LB;LB=q[AB];q[AB]=q[FB];q[FB]=LB;LB=s[AB];s[AB]=s[FB];s[FB]=LB;}JB(CD,iC,jC);while (u>0){SH(u<MB-2);u-- ;int n=lB[u];int m=kB[u];int l=cB[u];if(m-n<kC||l>MC){rH(g,GB,nD,DD,n,m,l);if(lH<0){return;}continue;}int tB=mD(GB[g[n]+l],GB[g[m]+l],GB[g[(n+m)>>1]+l]);int h=n;int DB=n;int i=m;int EB=m;while (true){while (true){if(h>i){break;}int k=(GB[g[h]+l])-tB;if(k==0){int BB=g[h];g[h]=g[DB];g[DB]=BB;DB++ ;h++ ;continue;}if(k>0){break;}h++ ;}while (true){if(h>i){break;}int k=(GB[g[i]+l])-tB;if(k==0){int BB=g[i];g[i]=g[EB];g[EB]=BB;EB-- ;i-- ;continue;}if(k<0){break;}i-- ;}if(h>i){break;}int BB=g[h];g[h]=g[i];g[i]=BB;h++ ;i-- ;}SH(i==h-1);if(EB<DB){JB(n,m,l+1);continue;}int k=ZB(DB-n,h-DB);XB(n,h-k,k);int KB=ZB(m-EB,EB-i);XB(h,m-KB+1,KB);k=n+h-DB-1;KB=m-(EB-i)+1;o[0]=n;q[0]=k;s[0]=l;o[1]=KB;q[1]=m;s[1]=l;o[2]=k+1;q[2]=KB-1;s[2]=l+1;if(v(0)<v(1)){TB(0,1);}if(v(1)<v(2)){TB(1,2);}if(v(0)<v(1)){TB(0,1);}SH(v(0)>=v(1));SH(v(1)>=v(2));JB(o[0],q[0],s[0]);JB(o[1],q[1],s[1]);JB(o[2],q[2],s[2]);}}void rH(HB.Uint32List h,HB.Uint8List q,HB.Uint16List s,int u,int n,int o,int l){int v=o-n+1;if(v<2){return;}const List<int> AB=const[1,4,13,40,121,364,1093,3280,9841,29524,88573,265720,797161,2391484];int m=0;while (AB[m]<v){m++ ;}m-- ;for(;m>=0;m-- ){int i=AB[m];int j=n+i;while (true){if(j>o){break;}int k=h[j];int g=j;while (sH(h[g-i]+l,k+l,q,s,u)){h[g]=h[g-i];g=g-i;if(g<=(n+i-1)){break;}}h[g]=k;j++ ;if(j>o){break;}k=h[j];g=j;while (sH(h[g-i]+l,k+l,q,s,u)){h[g]=h[g-i];g=g-i;if(g<=(n+i-1)){break;}}h[g]=k;j++ ;if(j>o){break;}k=h[j];g=j;while (sH(h[g-i]+l,k+l,q,s,u)){h[g]=h[g-i];g=g-i;if(g<=(n+i-1)){break;}}h[g]=k;j++ ;if(lH<0){return;}}}}bool sH(int i,int j,HB.Uint8List k,HB.Uint16List n,int o){SH(i!=j);int g=k[i];int h=k[j];if(g!=h){return (g>h);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}i++ ;j++ ;int q=o+8;do{g=k[i];h=k[j];if(g!=h){return (g>h);}int l=n[i];int m=n[j];if(l!=m){return (l>m);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}l=n[i];m=n[j];if(l!=m){return (l>m);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}l=n[i];m=n[j];if(l!=m){return (l>m);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}l=n[i];m=n[j];if(l!=m){return (l>m);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}l=n[i];m=n[j];if(l!=m){return (l>m);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}l=n[i];m=n[j];if(l!=m){return (l>m);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}l=n[i];m=n[j];if(l!=m){return (l>m);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}l=n[i];m=n[j];if(l!=m){return (l>m);}i++ ;j++ ;if(i>=o){i-= o;}if(j>=o){j-= o;}q-= 8;lH-- ;}while(q>=0);return false;}void GH(int g){if(g!=EH&&FH==1){DH=UB.CC(EH,DH);BH[EH]=1;lG[CH]=EH;CH++ ;EH=g;}else{if(g!=EH||FH==255){if(EH<256){HH();}EH=g;FH=1;}else{FH++ ;}}}void HH(){for(int g=0;g<FH;g++ ){DH=UB.CC(EH,DH);}BH[EH]=1;switch (FH){case 1:lG[CH]=EH;CH++ ;break;case 2:lG[CH]=EH;CH++ ;lG[CH]=EH;CH++ ;break;case 3:lG[CH]=EH;CH++ ;lG[CH]=EH;CH++ ;lG[CH]=EH;CH++ ;break;default:BH[FH-4]=1;lG[CH]=EH;CH++ ;lG[CH]=EH;CH++ ;lG[CH]=EH;CH++ ;lG[CH]=EH;CH++ ;lG[CH]=FH-4;CH++ ;break;}}mC input;GE PB;int bG;int EH;int FH;int CH;int DH;int pG;int eG;int lH;int qG;HB.Uint32List hG;HB.Uint32List iG;HB.Uint32List jG;HB.Uint8List lG;HB.Uint8List BH;HB.Uint16List mG;int NH;int TH;HB.Int32List QH;HB.Uint8List oG;List<HB.Uint8List> uG;List<HB.Int32List> vG;List<HB.Int32List> xG;List<HB.Uint32List> yG;HB.Uint8List rG;HB.Uint8List sG;static const int pC=2;static const int RD=12;static const int IE=18;static const int WC=(pC+RD+IE+2);static const int hB=258;static const int XC=0;static const int YC=1;static const int wB=6;static const int ZC=50;static const int JE=4;static const int KE=0;static const int SD=15;static const int OD=(2+(900000~/ZC));}String TD(g)=>Uri.decodeComponent(g.replaceAll(r"\+",' '));String LE(DateTime k){var l=['Mon','Tue','Wed','Thi','Fri','Sat','Sun'];var m=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];var tH=(int h,int n){var i=h.toString();var j=n-i.length;return (j>0)?'${new List.filled(j,'0').join('')}${h}':i;};var g=k.toUtc();var o=tH(g.hour,2);var q=tH(g.minute,2);var s=tH(g.second,2);return '${l[g.weekday-1]}, ${g.day} ${m[g.month-1]} ${g.year} '+'${o}:${q}:${s} ${g.timeZoneName}';}String ME(String j){var m=new Map();var i=IB.document.cookie!=null?IB.document.cookie.split('; '):[] ;for(var g=0,k=i.length;g<k;g++ ){var h=i[g].split('=');var l=TD(h[0]);if(j==l){return h[1]!=null?TD(h[1]):null;}}return null;}void UD(String g,String h,{expires,path,domain,secure}){if(expires is num){expires=new DateTime.fromMillisecondsSinceEpoch(new DateTime.now().millisecondsSinceEpoch+expires*24*60*60*1000);}var i=([Uri.encodeComponent(g),'=',Uri.encodeComponent(h),expires!=null?'; expires='+LE(expires):'',path!=null?'; path='+path:'',domain!=null?'; domain='+domain:'',secure!=null&&secure==true?'; secure':''].join(''));IB.document.cookie=i;}abstract class VD{static const int aC=61;static const int NE=13;static const int OE=10;static const int PE=76;static const String QE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";static const String RE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";static const List<int> qC=const[-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-1,-2,-2,-1,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,62,-2,62,-2,63,52,53,54,55,56,57,58,59,60,61,-2,-2,-2,0,-2,-2,-2,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-2,-2,-2,-2,63,-2,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2];static String SE(List<int> k,[bool v=false,bool q=false]){int m=k.length;if(m==0){return "";}final String j=v?RE:QE;final int n=m.remainder(3);final int AB=m-n;int o=((m~/3)*4)+((n>0)?4:0);if(q){o+= ((o-1)~/PE)<<1;}List<int> g=new List<int>(o);int h=0,l=0,s=0;while (l<AB){int i=((k[l++ ]<<16)&0xFFFFFF)|((k[l++ ]<<8)&0xFFFFFF)|k[l++ ];g[h++ ]=j.codeUnitAt(i>>18);g[h++ ]=j.codeUnitAt((i>>12)&0x3F);g[h++ ]=j.codeUnitAt((i>>6)&0x3F);g[h++ ]=j.codeUnitAt(i&0x3f);if(q&& ++s==19&&h<o-2){g[h++ ]=NE;g[h++ ]=OE;s=0;}}if(n==1){int i=k[l];g[h++ ]=j.codeUnitAt(i>>2);g[h++ ]=j.codeUnitAt((i<<4)&0x3F);g[h++ ]=aC;g[h++ ]=aC;}else if(n==2){int i=k[l];int u=k[l+1];g[h++ ]=j.codeUnitAt(i>>2);g[h++ ]=j.codeUnitAt(((i<<4)|(u>>4))&0x3F);g[h++ ]=j.codeUnitAt((u<<2)&0x3F);g[h++ ]=aC;}return new String.fromCharCodes(g);}static List<int> TE(String h){int j=h.length;if(j==0){return new List<int>(0);}int o=0;for(int g=0;g<j;g++ ){int k=qC[h.codeUnitAt(g)];if(k<0){o++ ;if(k==-2){throw new FormatException('Invalid character: ${h[g]}');}}}if((j-o)%4!=0){throw new FormatException('''Size of Base 64 characters in Input
          must be a multiple of 4. Input: ${h}''');}int q=0;for(int g=j-1;g>=0;g-- ){int s=h.codeUnitAt(g);if(qC[s]>0)break;if(s==aC)q++ ;}int m=(((j-o)*6)>>3)-q;List<int> n=new List<int>(m);for(int g=0,i=0;i<m;){int l=0;for(int u=4;u>0;){int k=qC[h.codeUnitAt(g++ )];if(k>=0){l=((l<<6)&0xFFFFFF)|k;u-- ;}}n[i++ ]=l>>16;if(i<m){n[i++ ]=(l>>8)&0xFF;if(i<m)n[i++ ]=l&0xFF;}}return n;}}class WD{static String SE(List<int> g,{bool urlSafe: false,bool addLineSeparator: false}){return VD.SE(g,urlSafe,addLineSeparator);}static List<int> TE(String g){return VD.TE(g);}}