import "dart:typed_data";import "dart:html";import "dart:js";import "dart:async";import "dart:math";import "dart:convert";const bH='mangledGlobalNames';const cH='mangledNames';const dH='metadata';const eH='getIsolateTag';class hF{static const String fH="Chrome";static const String gH="Firefox";static const String hH="Internet Explorer";static const String iH="Opera";static const String jH="Safari";final String JH;final String minimumVersion;const hF(this.JH,[this.minimumVersion]);}class iF{const iF();}class jF{final String name;const jF(this.name);}class kF{const kF();}class lF{const lF();}class fE{void UH(){mH();nH();oH();pH();qH();rH();sH();tH();}void mH(){Element j=querySelector('.close-jumbotron-button');Element k=querySelector('.open-jumbotron-button');if(j==null||k==null){return;}Element g=querySelector('.jumbotron');Element h=querySelector('.jumbotron-folded');j.onClick.listen((i){g.style.display='none';h.style.display='block';yE('closeJumbotron','1',expires:180);i.stopPropagation();});k.onClick.listen((i){g.style.display='block';h.style.display='none';yE('closeJumbotron','0',expires:180);i.stopPropagation();});if(EG('closeJumbotron')=='1'){g.style.display='none';h.style.display='block';}}void nH(){Element i=querySelector('.navbar-toggle-button');Element g=querySelector('.navbar-collapsible-block');bool h=false;var j=(l){if(h){g.classes..add('in')..remove('collapse')..remove('collapsing');}else{g.classes..add('collapse')..remove('collapsing')..remove('in');g.style.height='0';}};g.onTransitionEnd.listen(j);i.onClick.listen((m){h=!h;g.classes..add('collapsing')..remove('collapse')..remove('in');if(h){int k=g.scrollHeight+1;g.style.height="${k}px";}else{g.style.height="0";}});}void oH(){List<Node> k=document.getElementsByTagName('span');DateTime l=new DateTime.now();Duration m=l.timeZoneOffset;List<String> n=const['Понедельник','Вторник','Среда','Четверг','Пятница','Суббота','Воскресенье'];List<String> o=const['января','февраля','марта','апреля','мая','июня','июля','августа','сентября','октября','ноября','декабря'];k.forEach((Element h){String i=h.dataset['postDate'];if(i==null){return;}DateTime j=DateTime.parse(i);if(j==null){return;}DateTime g=j.add(m);h.text="${n[g.weekday-1]}, ${g.day} ${o[g.month-1]} ${g.year}" ", ${g.hour<10?'0':''}${g.hour}:${g.minute<10?'0':''}${g.minute}";});}void pH(){ElementList h=querySelectorAll('span.post-comments');if(h.length==0){return;}new Timer.periodic(new Duration(microseconds:100),(l){if(h[0].text.startsWith('Считаем')){return;}l.cancel();h.forEach((Element m){Element i=m.querySelector('a');if(i==null){return;}i.text=i.text.replaceAllMapped(new RegExp('^(\\d+) комментариев\$'),(Match k){int g=int.parse(k[1]);if((g%100/10).round()!=1){int j=g%10;if(j==1){return '${g} комментарий';}else if(j>=2&&j<=4){return '${g} комментария';}}return k[0];});});});}void qH(){if(uH()){vH();}}bool uH(){final NodeValidatorBuilder q=new NodeValidatorBuilder.common()..allowElement('span',attributes:['data-linenum']);ElementList n=querySelectorAll('pre > code.sourceCode');if(n.length>0){JsObject u=context['hljs'];n.forEach((HtmlElement j){u.callMethod('highlightBlock',[j]);List<String> h=j.innerHtml.split('\n');RegExp v=new RegExp(r'<span[\s\S]*?>');RegExp AB=new RegExp(r'</span>');List<String> k=[] ;for(int g=0;g<h.length; ++g){String i='<span class="line" data-linenum="${g+1}">';if(h[g]==''){i+= '&nbsp;';}else{String l=k.join('')+h[g];i+= l;Iterable<Match> o=v.allMatches(l);Iterable<Match> BB=AB.allMatches(l);k=[] ;for(int m=BB.length;m<o.length; ++m){k.add(o.elementAt(m).group(0));i+= '</span>';}}i+= '</span>';h[g]=i;}j.setInnerHtml(h.join('\n'),validator:q);j.classes.add('highlighted');});return true;}else{return false;}}void vH(){Element k=new DivElement()..classes.add('tooltip-inner');Element g=new DivElement()..append(new DivElement()..classes.add('tooltip-arrow'))..append(k)..classes.addAll(['tooltip','left','fade']);g.classes.add(CssStyleDeclaration.supportsTransitions?'out':'in');g.style.display='none';document.body.append(g);g.onTransitionEnd.listen((TransitionEvent i){if(g.classes.contains('out')){g.style.display='none';}});void m(){if(!CssStyleDeclaration.supportsTransitions){g.style.display='none';}else{g.classes..remove('in')..add('out');}}void n(o){g.style..visibility='hidden'..display='block';g.style..left="${o.offsetLeft-g.clientWidth}px"..top="${o.offsetTop-2}px"..visibility="visible";if(CssStyleDeclaration.supportsTransitions){g.classes..remove('out')..add('in');}}Element h;bool j=false;var l=querySelectorAll('span.line');l.onClick.listen((MouseEvent i){if(h==i.currentTarget){if(!j){j=true;return;}m();h=null;j=false;return;}j=true;h=i.currentTarget;k.text='#'+h.getAttribute('data-linenum');n(h);});l.onMouseMove.listen((MouseEvent i){if(j||h==i.currentTarget){return;}h=i.currentTarget;k.text='#'+h.getAttribute('data-linenum');n(h);});l.onMouseOut.listen((MouseEvent i){if(j||h!=i.currentTarget){return;}m();h=null;});}void rH(){var j=querySelectorAll('.note-link');if(j.length==0){return;}Element k=new HeadingElement.h3()..classes.add('popover-title');DivElement l=new DivElement()..classes.add('popover-content');Element g=new DivElement()..append(new DivElement()..classes.add('arrow'))..append(k)..append(l)..classes.addAll(['popover','top','fade']);g.classes.add(CssStyleDeclaration.supportsTransitions?'out':'in');g.style.display='none';document.body.append(g);g.onTransitionEnd.listen((TransitionEvent m){if(g.classes.contains('out')){g.style.display='none';}});var i;final NodeValidatorBuilder o=new NodeValidatorBuilder.common()..allowNavigation(new mF());j.onClick.listen((MouseEvent m){var h=m.currentTarget;if(i==h){if(!CssStyleDeclaration.supportsTransitions){g.style.display='none';}else{g.classes..remove('in')..add('out');}i=null;return;}k.text="Примечание ${h.text}";var n=querySelector('.footnotes li[data-for=${h.id}]');if(n==null){return;}l.setInnerHtml(n.innerHtml,validator:o);i=h;g.style..visibility='hidden'..display='block';g.style..left="${h.offsetLeft+(h.clientWidth-g.clientWidth)/2+2}px"..top="${h.offsetTop-g.clientHeight}px"..visibility="visible";if(CssStyleDeclaration.supportsTransitions){g.classes..remove('out')..add('in');}});}void sH(){Element g=querySelector('.pager .previous');Element h=querySelector('.pager .next');bool k=window.navigator.platform.indexOf('Mac')!=-1;if(g!=null){g.attributes['title']+=" (${k?'⌥←':'Ctrl + ←'})";}if(h!=null){h.attributes['title']+=" (${k?'⌥→':'Ctrl + →'})";}if(g!=null||h!=null){document.onKeyDown.listen((KeyboardEvent i){if(i.altKey||i.ctrlKey){Element j;if(i.keyCode==KeyCode.LEFT){j=g;}else if(i.keyCode==KeyCode.RIGHT){j=h;}if(j!=null){window.location.replace(j.querySelector('a').getAttribute('href'));}}});}}void tH(){if(querySelectorAll('span.math').length>0){Element g=new ScriptElement()..type="text/javascript"..async=true..src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML";document.body.append(g);}}}class mF implements UriPolicy{bool allowsUri(String g){return true;}}class uD{Element wH;NC xH;uD(this.xH,this.wH){yH();zH();xH.ZF.listen((g)=>zH());xH.aF.listen((g)=>zH());}void yH(){UListElement g=new UListElement()..classes.add('list-group')..append(new LIElement()..classes.add('list-group-item')..append(new HeadingElement.h4()..classes.add('list-group-item-heading')..text='Исключения'));wH.append(g);}LIElement AI()=>new LIElement()..classes.addAll(['list-group-item','exclusions-item'])..text='Нет исключений';void zH(){ElementList i=wH.querySelectorAll(".exclusions-item");i.forEach((j)=>j.remove());Element h=wH.children[0];if(xH.mC.length==0){h.append(AI());return;}for(List<t> g in xH.mC){h.append(new LIElement()..classes.addAll(['list-group-item','exclusions-item'])..append(new ButtonElement()..classes.addAll(['btn','btn-default','btn-xs'])..title="Включить"..append(new SpanElement()..classes.addAll(['glyphicon','glyphicon-remove']))..onClick.listen((k)=>xH.TH(g)))..appendHtml(" ${g[0].name} &mdash; ${g[1].name}"));}}}class nF{static Future<List<t>> oF(String k){Completer<List<t>> h=new Completer<List<t>>();HttpRequest.getString('http://geocode-maps.yandex.ru/1.x/?format=json&geocode='+k).then((String l){JsonDecoder m=new JsonDecoder(null);Map n=m.convert(l);List<t> i=<t>[] ;for(Map g in n['response']['GeoObjectCollection']['featureMember']){if(g['GeoObject']['metaDataProperty']['GeocoderMetaData']['kind']!='locality'){continue;}List<String> j=g['GeoObject']['Point']['pos'].split(' ');i.add(new t(g['GeoObject']['name'],double.parse(j[1]),double.parse(j[0]),g['GeoObject']['metaDataProperty']['GeocoderMetaData']['text']));}h.complete(i);}).catchError(h.completeError);return h.future;}}class yD{Element wH;NC xH;JsObject map;JsObject yB;JsObject CD;yD(this.xH,this.wH){JsObject h=new JsObject.jsify({"behaviors":["drag","scrollZoom","dblClickZoom","multiTouch","rightMouseButtonMagnifier"],"center":[53.906077,27.554914],"zoom":8});map=new JsObject(context['ymaps']['Map'],[this.wH,h]);map['controls'].callMethod('add',['zoomControl']);JsObject g=new JsObject(context['ymaps']['control']['Button'],[new JsObject.jsify({"data":{"content":'<span class="glyphicon glyphicon-fullscreen"></span>',"title":"На полный экран"}}),new JsObject.jsify({"position":{"left":5,"top":5}})]);g['events'].callMethod("add",["select",(i)=>BI(true)]);g['events'].callMethod("add",["deselect",(i)=>BI(false)]);map['controls'].callMethod('add',[g]);xH.ZE.listen(TE);xH.WE.listen(LH);xH.XE.listen(NH);xH.YE.listen(SE);xH.VE.listen(MH);xH.aE.listen(bE);}void BI(bool g){if(CD==null){CD=map.callMethod("getBounds");}if(g){wH.classes.add("full-screen");}else{wH.classes.remove("full-screen");}map['container'].callMethod("fitToViewport",[] );map.callMethod("setBounds",[CD]);}void TE(kB<t> g){if(g.oldValue!=null){map["geoObjects"].callMethod("remove",[g.oldValue.SC]);}JsObject h=g.newValue.SC;h['options'].callMethod('set',['preset','twirl#blueDotIcon']);map["geoObjects"].callMethod("add",[h]);}void LH(t h){JsObject g=h.SC;g['options'].callMethod('set',['preset','twirl#blueIcon']);map["geoObjects"].callMethod("add",[g]);}void MH(List<t> h){for(t i in h){JsObject g=i.SC;g['options'].callMethod('set',['preset','twirl#blueIcon']);map["geoObjects"].callMethod("add",[g]);}}void NH(t g){map["geoObjects"].callMethod("remove",[g.SC]);}void SE(List<t> g){for(t h in g){map["geoObjects"].callMethod("remove",[h.SC]);}}void bE(kB<lB> q){if(yB!=null){map["geoObjects"].callMethod("remove",[yB]);}lB i=q.newValue;if(i==null){yB=null;return;}var g=i.path[0][0];List<List<double>> n=[] ;double j=g.KC;double l=g.KC;double k=g.XC;double m=g.XC;n.add([g.KC,g.XC]);for(int o=0;o<i.path.length; ++o){t h=i.path[o][1];j=min(j,h.KC);k=min(k,h.XC);l=max(l,h.KC);m=max(m,h.XC);n.add([h.KC,h.XC]);}if(i.lC<YC.FD){JsObject u=new JsObject(context['ymaps']['geometry']['LineString'],[new JsObject.jsify(n),new JsObject.jsify({"coordRendering":'shortestPath',"geodesic":true})]);yB=new JsObject(context['ymaps']['GeoObject'],[new JsObject.jsify({"geometry":u})]);map["geoObjects"].callMethod("add",[yB]);}if(j==l&&k==m){map.callMethod("setCenter",[new JsObject.jsify([j,k]),8]);CD=map.callMethod("getBounds");}else{CD=new JsObject.jsify([[j,k],[l,m]]);map.callMethod("setBounds",[CD]);}}void reset(){if(yB!=null){map["geoObjects"].callMethod("remove",[yB]);}for(t g in xH.wB){map["geoObjects"].callMethod("remove",[g.SC]);}map["geoObjects"].callMethod("remove",[xH.TB.SC]);map["geoObjects"].callMethod("remove",[xH.XB.SC]);}}class vD{NC xH;Element wH;Map<t,LIElement> CI=<t,LIElement>{};vD(this.xH,this.wH){yH();xH..ZE.listen(TE)..WE.listen(WC)..VE.listen(IH)..YE.listen(SE)..XE.listen(oD);}void yH(){LIElement g=new LIElement()..classes.add('list-group-item');new gE(xH,g);UListElement h=new UListElement()..classes.add('list-group')..append(new LIElement()..classes.add('list-group-item')..append(new HeadingElement.h4()..classes.add('list-group-item-heading')..text='Города'))..append(g)..append(new LIElement()..classes.addAll(['list-group-item','first-city']))..append(new LIElement()..classes.addAll(['list-group-item','last-city']));wH.append(h);}void TE(kB<t> g){if(xH.TB!=null){DI(wH.querySelector('.first-city'),false,true,xH.TB);}if(xH.XB!=null){DI(wH.querySelector('.last-city'),true,false,xH.XB);}}void WC(t h){LIElement g=new LIElement()..classes.addAll(['list-group-item']);DI(g,true,true,h);wH.children.first.insertBefore(g,wH.querySelector('.last-city'));CI[h]=g;}void IH(List<t> g)=>g.forEach(WC);void oD(t g){LIElement h=CI[g];if(h==null){return;}h.remove();CI.remove(g);}void SE(List<t> g)=>g.forEach(oD);ButtonElement EI(String g,String h){return new ButtonElement()..classes.addAll(["btn","btn-default","btn-xs"])..title=g..append(new SpanElement()..classes.addAll(["glyphicon","glyphicon-${h}"]));}void DI(Element k,bool l,bool m,t g){k.innerHtml='';ButtonElement h=EI("Удалить","remove");if(!l||!m){h.disabled=true;}else{h.onClick.listen((n)=>xH.oD(g));}ButtonElement i=EI("В начало","chevron-up");if(!l){i.disabled=true;}else{i.onClick.listen((n)=>xH.VH(g));}ButtonElement j=EI("В конец","chevron-down");if(!m){j.disabled=true;}else{j.onClick.listen((n)=>xH.WH(g));}DivElement o=new DivElement()..classes.add("btn-group")..append(h)..append(i)..append(j);k..append(o)..appendText(" "+g.name);}}class wD{NC xH;Element wH;xD kD;wD(this.xH,this.wH){yH();kD=new xD(xH,wH.querySelector('.route-header'));xH.aE.listen(bE);xH.XH.listen(DD);}void yH(){UListElement g=new UListElement()..classes.add('list-group')..append(new LIElement()..classes.addAll(['list-group-item','route-header'])..append(new HeadingElement.h4()..classes.addAll(['list-group-item-heading','route-title'])));wH.append(g);}void DD(bool i){if(i){ElementList g=wH.querySelectorAll('.route-item');g.forEach((h)=>h.remove());Element j=wH.children.first;j.append(new LIElement()..classes.addAll(['list-group-item','route-item','calc-progress'])..append(new DivElement()..classes.addAll(['progress','progress-striped','active'])..append(new DivElement()..classes.add('progress-bar')..style.width='100%')));}else{ElementList g=wH.querySelectorAll('.route-item.calc-progress');g.forEach((h)=>h.remove());}}void bE(kB<lB> i){ElementList j=wH.querySelectorAll('.route-item');j.forEach((k)=>k.remove());lB h=i.newValue;if(h==null){wH.querySelector('.route-title').text='Маршрут не существует';return;}wH.querySelector('.route-title').text='Маршрут ${h.QH} км';Element l=wH.children.first;h.path.forEach((List<t> g)=>l.append(new LIElement()..classes.addAll(['list-group-item','route-item'])..append(new SpanElement()..classes.addAll(['badge','distance','pull-right'])..text="${g[0].distanceTo(g[1]).round()} км")..append(new ButtonElement()..classes.addAll(['btn','btn-default','btn-xs'])..title='Исключить'..append(new SpanElement()..classes.addAll(['glyphicon','glyphicon-remove']))..onClick.listen((m)=>xH.RH(g)))..appendHtml(' ${g[0].name} &mdash; ${g[1].name}')));}}class xD{Element wH;NC xH;bool FI;bool get BD=>FI;void set BD(bool g){(wH.querySelector('.autoupdate-checkbox') as CheckboxInputElement).checked=g;FI=g;}YC GI;xD(this.xH,this.wH){yH();BD=false;xH.ZE.listen(HI);xH.WE.listen(HI);xH.XE.listen(HI);xH.YE.listen(HI);xH.VE.listen(HI);xH.ZF.listen(HI);xH.aF.listen(HI);}void yH(){wH.insertBefore(new ButtonElement()..classes.addAll(['btn','btn-default','btn-xs','pull-right','refresh-button'])..title='Обновить'..append(new SpanElement()..classes.addAll(["glyphicon","glyphicon-refresh"])..onClick.listen((g)=>RF())),wH.children[0]);wH.append(new FormElement()..append(new DivElement()..classes.add("checkbox")..append(new LabelElement()..append(new CheckboxInputElement()..classes.add('autoupdate-checkbox')..onChange.listen((h)=>FI=(wH.querySelector('.autoupdate-checkbox') as CheckboxInputElement).checked))..appendText("Автообновление"))));}Timer II;static final Duration qF=new Duration(milliseconds:50);void HI(g){if(!BD){return;}if(II!=null&&II.isActive){II.cancel();}II=new Timer(qF,RF);}void RF(){if(GI!=null){GI.cancel();xH.DD=false;GI=null;}Timer.run(JI);}void JI(){if(GI!=null){return;}if(xH.wB.length==0){bool q=false;xH.mC.forEach((List<t> k){if(k[0]==xH.TB&&k[1]==xH.XB||k[1]==xH.TB&&k[0]==xH.XB){q=true;}});if(q){xH.path=null;return;}xH.path=new lB(<List<t>>[<t>[xH.TB,xH.XB]],xH.TB.distanceTo(xH.XB));return;}xH.DD=true;List<t> i=<t>[xH.TB];i.addAll(xH.wB);i.add(xH.XB);int l=i.length;List<List<double>> h=<List<double>>[] ;for(int g=0;g<l; ++g){h.add(new List<double>.filled(l,YC.FD));}for(int g=0;g<xH.wB.length; ++g){h[0][g+1]=xH.TB.distanceTo(xH.wB[g]);h[g+1][l-1]=xH.XB.distanceTo(xH.wB[g]);}h[l-1][0]=0.0;for(int g=0;g<xH.wB.length-1; ++g){for(int j=g+1;j<xH.wB.length; ++j){double u=xH.wB[g].distanceTo(xH.wB[j]);h[g+1][j+1]=u;h[j+1][g+1]=u;}}if(xH.mC!=null){for(List<t> v in xH.mC){int m=-1;while((m=i.indexOf(v[0],m+1))!=-1){int n=-1;while((n=i.indexOf(v[1],n+1))!=-1){h[m][n]=YC.FD;h[n][m]=YC.FD;}}}}Element o=querySelector('.route-widget .refresh-button');Element AB=o.querySelector('.glyphicon');o.classes.add('disabled');AB.classes.add('in-progress');GI=new rF();GI.dF(h).then((BB){KI(BB);}).whenComplete((){AB.classes.remove('in-progress');o.classes.remove('disabled');GI=null;xH.DD=false;}).catchError((CB){});}t LI(int g){if(g==0){return xH.TB;}else if(g==xH.wB.length+1){return xH.XB;}else{return xH.wB[g-1];}}void KI(ZC g){if(g.lC>YC.FD){xH.path=null;}else{List<List<t>> i=<List<t>>[] ;for(int h=0;h<g.points.length-1; ++h){i.add(<t>[LI(g.points[h]),LI(g.points[h+1])]);}xH.path=new lB(i,g.lC);}}}class t{String MI;String NI;double OI;double QI;t(this.MI,this.OI,this.QI,[this.NI='']);t.kH(String h){List<String> g=h.split("|");MI=g[0];OI=double.parse(g[1]);QI=double.parse(g[2]);NI='';}String get name=>MI;String get SH=>NI;double get KC=>OI;double get XC=>QI;JsObject RI;JsObject get SC{if(RI==null){RI=new JsObject(context['ymaps']['Placemark'],[new JsObject.jsify([OI,QI]),new JsObject.jsify({"balloonContent":MI})]);}return RI;}static const double pF=6371.0;static const double QD=PI/180;double distanceTo(t g){double i=(g.KC-KC)*QD;double j=(g.XC-XC)*QD;double h=pow(sin(i/2.0),2)+cos(KC*QD)*cos(g.KC*QD)*pow(sin(j/2.0),2);double k=2*atan2(sqrt(h),sqrt(1-h));return pF*k;}String toString()=>NI==''?"${MI} (${OI}, ${QI})":"${NI} (${OI}, ${QI})";String eF()=>"${MI}|${OI}|${QI}";}class lB{List<List<t>> path;double lC;int get QH=>lC.round();lB(this.path,this.lC);}class kB<T>{T oldValue;T newValue;kB(this.newValue,this.oldValue);}class gE{NC xH;Element wH;List<t> SI=null;int TI=-1;int get CC=>TI;void set CC(int h){Element g=wH.querySelector('.list-group-item-info');if(g!=null){g.classes.remove('list-group-item-info');}TI=h;g=wH.querySelector('.suggestion-${TI}');if(g!=null){g.classes.add('list-group-item-info');}}List<t> get DC=>SI;void set DC(List<t> j){SI=j;Element h=wH.querySelector('.suggestions-list');if(h!=null){h.remove();}if(SI==null){wH.querySelector('.hide-button').classes.add('hidden');return;}wH.querySelector('.hide-button').classes.remove('hidden');if(SI.length==0){wH.append(new DivElement()..classes.add('suggestions-list')..text='Ничего не найдено.');return;}UListElement i=new UListElement()..classes.addAll(['list-group','suggestions-list']);for(int g=0;g<SI.length; ++g){i.append(new LIElement()..classes.addAll(['list-group-item','suggestion-${g}'])..append(new AnchorElement()..href='#'..text=SI[g].SH..onClick.listen((k){k.preventDefault();WC(SI[g]);})));}wH.append(i);}gE(this.xH,this.wH){yH();}void yH(){FormElement g=new FormElement()..classes.add('form-inline')..append(new DivElement()..classes.add('input-group')..append(new LabelElement()..classes.add('sr-only')..htmlFor="searchText"..text='Добавить город')..append(new SearchInputElement()..classes.addAll(['form-control','input-sm','search-input'])..id='searchText'..autocomplete='off'..placeholder='Добавить город'..onKeyDown.listen(YH))..append(new SpanElement()..classes.add('input-group-btn')..append(new ButtonElement()..classes.addAll(['btn','btn-default','btn-sm','hidden','hide-button'])..title="Скрыть результаты"..append(new SpanElement()..classes.addAll(['glyphicon','glyphicon-remove']))..onClick.listen((h){DC=null;(wH.querySelector('.search-input') as SearchInputElement).value='';}))..append(new ButtonElement()..classes.addAll(['btn','btn-default','btn-sm'])..title="Искать"..append(new SpanElement()..classes.addAll(['glyphicon','glyphicon-search']))..onClick.listen((h)=>cF()))));wH.append(g);}void YH(KeyboardEvent h){bool g=false;switch (h.keyCode){case KeyCode.ENTER:if(DC!=null&&CC!=-1){WC(DC[CC]);}else{cF();}g=true;break;case KeyCode.ESC:DC=null;(wH.querySelector('.search-input') as SearchInputElement).value='';g=true;break;case KeyCode.UP:if(DC==null){break;} --CC;if(CC<0){CC=DC.length-1;}UI();g=true;break;case KeyCode.DOWN:if(DC==null){break;} ++CC;if(CC>=DC.length){CC=0;}UI();g=true;break;}if(g){h.preventDefault();h.stopPropagation();}}void WC(t g){xH.WC(g);DC=null;(wH.querySelector('.search-input') as SearchInputElement).value='';}void cF(){nF.oF((wH.querySelector('.search-input') as SearchInputElement).value).then((g){if(g.length==1){WC(g[0]);return;}DC=g;CC=-1;});}void UI(){Element h=querySelector('.suggestions-list .suggestion-${CC}');Point g=h.offsetTo(document.body);if(g.y<window.scrollY+70){window.scrollTo(window.scrollX,g.y-70);}if(g.y+h.clientHeight>window.scrollY+window.innerHeight){window.scrollTo(window.scrollX,g.y+h.clientHeight-window.innerHeight);}}}class NC{List<t> CI;t VI;t WI;lB XI;List<List<t>> YI;bool ZI;NC(){CI=<t>[] ;YI=<List<t>>[] ;}t get TB=>VI;void set TB(t g){t h=VI;VI=g;PD.add(new kB(g,h));}t get XB=>WI;void set XB(t g){t h=WI;WI=g;PD.add(new kB(g,h));}lB get path=>XI;void set path(lB g){lB h=XI;XI=g;bF.add(new kB(g,h));}List<t> get wB=>CI;void WC(t g){CI.add(g);mD.add(g);}void HH(List<t> g){CI.addAll(g);QF.add(g);}void oD(t g){CI.remove(g);nD.add(g);}void ZH(){List<t> g=CI;CI=<t>[] ;TF.add(g);}void VH(t h){t g=VI;CI.remove(h);nD.add(h);TB=h;if(CI.indexOf(g)==-1&&XB!=g){CI.add(g);mD.add(g);}else if(XB==g){PD.add(new kB(XB,XB));}}void WH(t h){t g=WI;CI.remove(h);nD.add(h);XB=h;if(CI.indexOf(g)==-1&&g!=TB){CI.add(g);mD.add(g);}else if(g==TB){PD.add(new kB(TB,TB));}}List<List<t>> get mC=>YI;void RH(List<t> g){if(YI.contains(g)){return;}YI.add(g);UF.add(g);}void TH(List<t> g){if(YI.remove(g)){WF.add(g);}}bool get DD=>ZI;void set DD(bool g){ZI=g;SF.add(g);}StreamController<kB<t>> PD=new StreamController<kB<t>>.broadcast(sync:true);Stream<kB<t>> get ZE=>PD.stream;StreamController<t> mD=new StreamController<t>.broadcast(sync:true);Stream<t> get WE=>mD.stream;StreamController<t> nD=new StreamController<t>.broadcast(sync:true);Stream<t> get XE=>nD.stream;StreamController<List<t>> TF=new StreamController<List<t>>.broadcast(sync:true);Stream<List<t>> get YE=>TF.stream;StreamController<List<t>> QF=new StreamController<List<t>>.broadcast(sync:true);Stream<List<t>> get VE=>QF.stream;StreamController<kB<lB>> bF=new StreamController<kB<lB>>.broadcast(sync:true);Stream<kB<lB>> get aE=>bF.stream;StreamController<List<t>> UF=new StreamController<List<t>>.broadcast(sync:true);Stream<List<t>> get ZF=>UF.stream;StreamController<List<t>> WF=new StreamController<List<t>>.broadcast(sync:true);Stream<List<t>> get aF=>WF.stream;StreamController<bool> SF=new StreamController<bool>.broadcast(sync:true);Stream<bool> get XH=>SF.stream;}class hE{NC xH;yD map;vD KH;uD mC;wD yB;hE(){xH=new NC();map=new yD(xH,querySelector('.map-widget'));KH=new vD(xH,querySelector('.cities-list-widget'));yB=new wD(xH,querySelector('.route-widget'));mC=new uD(xH,querySelector('.exclusions-widget'));aI();window.onHashChange.listen(bI);xH.aE.listen((g)=>aH());yB.kD.BD=true;querySelector('.main-widget').classes.remove('hidden');}void aI(){bool h=cI();if(!h){t g=new t("Минск",53.906077,27.554914);xH.TB=g;xH.XB=g;xH.path=new lB(<List<t>>[[g,g]],0.0);}}void bI(Event g){yB.kD.BD=false;map.reset();aI();yB.kD.BD=true;}bool cI(){String i=window.location.hash;if(i==''||i=='#'){return false;}i=i.substring(1);try {List<int> u=AF.MG(i);List<int> v=new xF().PH(u);String AB=UTF8.decode(v);List g=JSON.decode(AB);bool o=false;int l;if(g.last is bool&&g.last==true){o=true;g.removeLast();l=g.length;}else{l=g.length-1;}xH.ZH();xH.TB=new t.kH(g.first);List<t> q=[] ;double m=0.0;List<List<t>> j=<List<t>>[] ;t h=xH.TB;for(int n=1;n<l; ++n){t k=new t.kH(g[n]);q.add(k);j.add(<t>[h,k]);m+= h.distanceTo(k);h=k;}if(o){xH.XB=xH.TB;j.add(<t>[h,xH.TB]);}else{xH.XB=new t.kH(g.last);j.add(<t>[h,xH.XB]);}m+= h.distanceTo(xH.XB);xH.HH(q);xH.path=new lB(j,m);}catch (BB){return false;}return true;}void aH(){if(xH.path==null){window.location.hash='#';}List g=[xH.TB.eF()];int j=xH.path.path.length-(xH.TB==xH.XB?1:0);for(int h=0;h<j; ++h){g.add(xH.path.path[h][1].eF());}if(xH.TB==xH.XB){g.add(true);}List<int> k=UTF8.encode(JSON.encode(g));List<int> l=new yF().encode(k);String i=AF.KG(l);if(History.supportsState){window.history.replaceState(null,document.title,window.location.pathname+"#"+i);}else{window.location.hash='#'+i;}}}class rF extends YC{int dI;List<List<double>> eI;List<List<int>> fI;List<List<double>> gI;List<List<double>> hI;List<uB> iI;List<int> jI;double kI;Random lI=new Random();int mI;int nI;static final double sF=0.1;static final double tF=2.0;static final double uF=0.5;static final double vF=1-uF;static final int iE=50;static final int wF=100;static final double aC=0.01;Future<ZC> dF(List<List<double>> j){Completer<ZC> g=new Completer<ZC>();lD=false;eI=j;mI=j.length*100;oI();int m=0;int h=0;void k(){if(lD){g.completeError("Cancelled");return;}if(h<wF){ ++h; ++m;pI();qI();rI();bool l=false;for(uB i in iI){if(jI==null||i.LC<kI){jI=i.qB;kI=i.LC;l=true;}}if(l){h=0;}Timer.run(k);}else{Timer.run((){if(lD){g.completeError("Cancelled");return;}sI();g.complete(new ZC(jI,kI));});}}Timer.run(k);return g.future;}void oI(){dI=eI.length;nI=(iE/2).round();gI=<List<double>>[] ;hI=<List<double>>[] ;for(int g=0;g<dI; ++g){gI.add(new List<double>.filled(dI,1.0));hI.add(new List<double>.filled(dI,0.0));}tI=new List<double>.filled(dI,0.0);uI();vI();wI();}void uI(){fI=<List<int>>[] ;for(int h=0;h<dI; ++h){List<RD<int,double>> i=<RD<int,double>>[] ;for(int g=0;g<dI; ++g){i.add(new RD(g,eI[h][g]));}i.sort((k,l)=>Comparable.compare(k.UE,l.UE));List<int> j=<int>[] ;for(int g=0;g<dI; ++g){j.add(i[g].YF);}fI.add(j);}}void vI(){for(int g=0;g<dI; ++g){for(int h=0;h<dI; ++h){hI[g][h]=pow(gI[g][h],sF)*pow(eI[g][h],-tF);}}}void wI(){iI=<uB>[] ;for(int g=0;g<iE; ++g){iI.add(new uB());}}void pI(){for(uB g in iI){g.reset(dI);}for(int h=1;h<dI-1; ++h){for(uB g in iI){xI(g,h);}}for(uB g in iI){int i=g.qB.last;g.qB.add(dI-1);g.LC+= eI[i][dI-1];}}List<double> tI;void xI(uB h,int l){int i=h.qB[l-1];double j=0.0;for(int g=1;g<dI-1; ++g){if(h.pD[g]){tI[g]=0.0;}else{tI[g]=hI[i][g];j+= tI[g];}}double m=lI.nextDouble()*j;int g=1;double k=tI[g];while(k<m){ ++g;k+= tI[g];}h.qB.add(g);h.LC+= eI[i][g];h.pD[g]=true;}void qI(){for(uB g in iI){bool k=true;if(k){k=false;int h=1;for(;!k&&h<dI-2; ++h){int l=g.qB[h-1];int m=g.qB[h];double u=-eI[l][m];for(int i=h+1;!k&&i<dI-1; ++i){int n=g.qB[i];int o=g.qB[i+1];double q=u-eI[n][o]+eI[l][n]+eI[m][o];if(q<0){int v=((i-h+1)/2).floor();for(int j=0;j<v; ++j){int AB=g.qB[h+j];g.qB[h+j]=g.qB[i-j];g.qB[i-j]=AB;}g.LC+= q; --h;k=true;}}}}}}void rI(){yI();iI.sort((uB h,uB i)=>-Comparable.compare(h.LC,i.LC));for(int g=0;g<nI-1; ++g){zI(iI[g].LC,iI[g].qB,(nI-g-1).toDouble());}if(kI!=null){zI(kI,jI,nI.toDouble());}vI();}void yI(){for(int g=0;g<dI-1; ++g){for(int h=g;h<dI; ++h){gI[g][h]*=vF;gI[h][g]=gI[g][h];}}}void zI(double k,List<int> h,double l){double m=l/k;for(int g=0;g<h.length-1; ++g){int i=h[g];int j=h[g+1];gI[i][j]+=m;gI[j][i]=gI[i][j];}}void sI(){List<double> CB=new List<double>.filled(dI,0.0);List<double> DB=new List<double>.filled(dI,0.0);List<int> j=new List<int>.from(jI);double l;bool GB=true;void IB(){for(int g=1;g<dI; ++g){CB[g]=CB[g-1]+eI[j[g-1]][j[g]];}l=CB.last;for(int g=dI-2;g>=0; --g){DB[g]=DB[g+1]+eI[j[g+1]][j[g]];}}double EB(m,k){if(m<=k){return CB[k]-CB[m];}else{return DB[k]-DB[m];}}double o(m,k,AB,q,BB,FB)=>EB(0,m)+eI[j[m]][j[k]]+EB(k,AB)+eI[j[AB]][j[q]]+EB(q,BB)+eI[j[BB]][j[FB]]+EB(FB,dI-1);void u(m,k,AB,q,BB,FB){GB=true;List<int> n=new List<int>.from(j);int v=m+1;n[v++ ]=j[k];if(k<AB){for(int g=k+1;g<=AB; ++g){n[v++ ]=j[g];}}else{for(int g=k-1;g>=AB; --g){n[v++ ]=j[g];}}n[v++ ]=j[q];if(q<BB){for(int g=q+1;g<=BB; ++g){n[v++ ]=j[g];}}else{for(int g=q-1;g>=BB; --g){n[v++ ]=j[g];}}n[v++ ]=j[FB];j=n;IB();}IB();while(GB){GB=false;for(int g=0;g<dI-3; ++g){for(int h=g+1;h<dI-2; ++h){for(int i=h+1;i<dI-1; ++i){if(o(g,g+1,h,i,h+1,i+1)-l<-aC){u(g,g+1,h,i,h+1,i+1);}if(o(g,h,g+1,h+1,i,i+1)-l<-aC){u(g,h,g+1,h+1,i,i+1);}if(o(g,h,g+1,i,h+1,i+1)-l<-aC){u(g,h,g+1,i,h+1,i+1);}if(o(g,h+1,i,g+1,h,i+1)-l<-aC){u(g,h+1,i,g+1,h,i+1);}if(o(g,h+1,i,h,g+1,i+1)-l<-aC){u(g,h+1,i,h,g+1,i+1);}if(o(g,i,h+1,g+1,h,i+1)-l<-aC){u(g,i,h+1,g+1,h,i+1);}if(o(g,i,h+1,h,g+1,i+1)-l<-aC){u(g,i,h+1,h,g+1,i+1);}}}}};jI=j;kI=l;}}abstract class YC{static final double FD=1e8;bool lD=false;Future<ZC> dF(List<List<double>> g);void cancel(){lD=true;}}class ZC{List<int> points;double lC;ZC(this.points,this.lC);}class RD<OG,PG>{final OG YF;final PG UE;const RD(this.YF,this.UE);}class uB{double LC;List<int> qB;List<bool> pD;uB(){LC=0.0;}void reset(int g){LC=0.0;pD=new List<bool>.filled(g,false);pD[0]=true;qB=<int>[0];}}void main(){fE g=new fE();g.UH();context['ymaps'].callMethod('ready',[()=>new hE()]);}class aB{static int jE=0xffffffff;static int cC(int h,int g){return ((g<<8)^zF[(g>>24)&0xff^(h&0xff)])&0xffffffff;}static int lE(int g){return g^0xffffffff;}static const List<int> TD=const[0x42,0x5a,0x68];static const int mE=0x30;static const List<int> nE=const[0x31,0x41,0x59,0x26,0x53,0x59];static const List<int> oE=const[0x17,0x72,0x45,0x38,0x50,0x90];static const List<int> zF=const[0x00000000,0x04c11db7,0x09823b6e,0x0d4326d9,0x130476dc,0x17c56b6b,0x1a864db2,0x1e475005,0x2608edb8,0x22c9f00f,0x2f8ad6d6,0x2b4bcb61,0x350c9b64,0x31cd86d3,0x3c8ea00a,0x384fbdbd,0x4c11db70,0x48d0c6c7,0x4593e01e,0x4152fda9,0x5f15adac,0x5bd4b01b,0x569796c2,0x52568b75,0x6a1936c8,0x6ed82b7f,0x639b0da6,0x675a1011,0x791d4014,0x7ddc5da3,0x709f7b7a,0x745e66cd,0x9823b6e0,0x9ce2ab57,0x91a18d8e,0x95609039,0x8b27c03c,0x8fe6dd8b,0x82a5fb52,0x8664e6e5,0xbe2b5b58,0xbaea46ef,0xb7a96036,0xb3687d81,0xad2f2d84,0xa9ee3033,0xa4ad16ea,0xa06c0b5d,0xd4326d90,0xd0f37027,0xddb056fe,0xd9714b49,0xc7361b4c,0xc3f706fb,0xceb42022,0xca753d95,0xf23a8028,0xf6fb9d9f,0xfbb8bb46,0xff79a6f1,0xe13ef6f4,0xe5ffeb43,0xe8bccd9a,0xec7dd02d,0x34867077,0x30476dc0,0x3d044b19,0x39c556ae,0x278206ab,0x23431b1c,0x2e003dc5,0x2ac12072,0x128e9dcf,0x164f8078,0x1b0ca6a1,0x1fcdbb16,0x018aeb13,0x054bf6a4,0x0808d07d,0x0cc9cdca,0x7897ab07,0x7c56b6b0,0x71159069,0x75d48dde,0x6b93dddb,0x6f52c06c,0x6211e6b5,0x66d0fb02,0x5e9f46bf,0x5a5e5b08,0x571d7dd1,0x53dc6066,0x4d9b3063,0x495a2dd4,0x44190b0d,0x40d816ba,0xaca5c697,0xa864db20,0xa527fdf9,0xa1e6e04e,0xbfa1b04b,0xbb60adfc,0xb6238b25,0xb2e29692,0x8aad2b2f,0x8e6c3698,0x832f1041,0x87ee0df6,0x99a95df3,0x9d684044,0x902b669d,0x94ea7b2a,0xe0b41de7,0xe4750050,0xe9362689,0xedf73b3e,0xf3b06b3b,0xf771768c,0xfa325055,0xfef34de2,0xc6bcf05f,0xc27dede8,0xcf3ecb31,0xcbffd686,0xd5b88683,0xd1799b34,0xdc3abded,0xd8fba05a,0x690ce0ee,0x6dcdfd59,0x608edb80,0x644fc637,0x7a089632,0x7ec98b85,0x738aad5c,0x774bb0eb,0x4f040d56,0x4bc510e1,0x46863638,0x42472b8f,0x5c007b8a,0x58c1663d,0x558240e4,0x51435d53,0x251d3b9e,0x21dc2629,0x2c9f00f0,0x285e1d47,0x36194d42,0x32d850f5,0x3f9b762c,0x3b5a6b9b,0x0315d626,0x07d4cb91,0x0a97ed48,0x0e56f0ff,0x1011a0fa,0x14d0bd4d,0x19939b94,0x1d528623,0xf12f560e,0xf5ee4bb9,0xf8ad6d60,0xfc6c70d7,0xe22b20d2,0xe6ea3d65,0xeba91bbc,0xef68060b,0xd727bbb6,0xd3e6a601,0xdea580d8,0xda649d6f,0xc423cd6a,0xc0e2d0dd,0xcda1f604,0xc960ebb3,0xbd3e8d7e,0xb9ff90c9,0xb4bcb610,0xb07daba7,0xae3afba2,0xaafbe615,0xa7b8c0cc,0xa379dd7b,0x9b3660c6,0x9ff77d71,0x92b45ba8,0x9675461f,0x8832161a,0x8cf30bad,0x81b02d74,0x857130c3,0x5d8a9099,0x594b8d2e,0x5408abf7,0x50c9b640,0x4e8ee645,0x4a4ffbf2,0x470cdd2b,0x43cdc09c,0x7b827d21,0x7f436096,0x7200464f,0x76c15bf8,0x68860bfd,0x6c47164a,0x61043093,0x65c52d24,0x119b4be9,0x155a565e,0x18197087,0x1cd86d30,0x029f3d35,0x065e2082,0x0b1d065b,0x0fdc1bec,0x3793a651,0x3352bbe6,0x3e119d3f,0x3ad08088,0x2497d08d,0x2056cd3a,0x2d15ebe3,0x29d4f654,0xc5a92679,0xc1683bce,0xcc2b1d17,0xc8ea00a0,0xd6ad50a5,0xd26c4d12,0xdf2f6bcb,0xdbee767c,0xe3a1cbc1,0xe760d676,0xea23f0af,0xeee2ed18,0xf0a5bd1d,0xf464a0aa,0xf9278673,0xfde69bc4,0x89b8fd09,0x8d79e0be,0x803ac667,0x84fbdbd0,0x9abc8bd5,0x9e7d9662,0x933eb0bb,0x97ffad0c,0xafb010b1,0xab710d06,0xa6322bdf,0xa2f33668,0xbcb4666d,0xb8757bda,0xb5365d03,0xb1f740b4];}class zD{bC xB;zD(this.xB);void QB(int g)=>cB(8,g);void qD(List<int> h){for(int g=0;g<h.length; ++g){cB(8,h[g]);}}void cE(int g){cB(32,g);}void cB(int h,int g){if(AJ==8&&h==8){xB.QB(g&0xff);return;}if(AJ==8&&h==16){xB.QB((g>>8)&0xff);xB.QB(g&0xff);return;}if(AJ==8&&h==24){xB.QB((g>>16)&0xff);xB.QB((g>>8)&0xff);xB.QB(g&0xff);return;}if(AJ==8&&h==32){xB.QB((g>>24)&0xff);xB.QB((g>>16)&0xff);xB.QB((g>>8)&0xff);xB.QB(g&0xff);return;}while(h>0){h-- ;int i=(g>>h)&0x1;BJ=(BJ<<1)|i;AJ-- ;if(AJ==0){xB.QB(BJ);AJ=8;BJ=0;}}}void flush(){if(AJ!=8){cB(AJ,0);}}int BJ=0;int AJ=8;}class qC{rC input;qC(this.input);int gB()=>pB(8);int pB(int g){if(g==0){return 0;}if(AJ==0){AJ=8;BJ=input.gB();}int h=0;while(g>AJ){h=(h<<AJ)+(BJ&pE[AJ]);g-= AJ;AJ=8;BJ=input.gB();}if(g>0){if(AJ==0){AJ=8;BJ=input.gB();}h=(h<<g)+(BJ>>(AJ-g)&pE[g]);AJ-= g;}return h;}int BJ=0;int AJ=0;static const List<int> pE=const[0,1,3,7,15,31,63,127,255];}class bC{int length;final int byteOrder;bC({int size: UD,this.byteOrder: kE}):CJ=new Uint8List(size==null?UD:size),length=0;List<int> VF(){return new Uint8List.view(CJ.buffer,0,length);}void clear(){CJ=new Uint8List(UD);length=0;}void QB(int g){if(length==CJ.length){DJ();}CJ[length++ ]=g&0xff;}void qD(List<int> h,[int g]){if(g==null){g=h.length;}while(length+g>CJ.length){DJ((length+g)-CJ.length);}CJ.setRange(length,length+g,h);length+= g;}void cE(int g){if(byteOrder==SD){QB((g>>24)&0xff);QB((g>>16)&0xff);QB((g>>8)&0xff);QB((g)&0xff);return;}QB((g)&0xff);QB((g>>8)&0xff);QB((g>>16)&0xff);QB((g>>24)&0xff);}void DJ([int g]){int h=UD;if(g!=null){if(g>h){h=g;}}Uint8List i=new Uint8List(CJ.length+h);i.setRange(0,CJ.length,CJ);CJ=i;}static const int UD=0x8000;Uint8List CJ;}const int kE=0;const int SD=1;class rC{final List<int> buffer;int offset;final int start;final int byteOrder;rC(g,{this.byteOrder: kE,int start: 0,int length}):this.buffer=g is ByteData?new Uint8List.view(g.buffer):g,this.start=start{EJ=length==null?buffer.length:length;offset=start;}int get length=>EJ-(offset-start);bool get XF=>offset>=(start+EJ);void reset(){offset=start;}int operator[](int g)=>buffer[offset+g];int indexOf(int h,[int i=0]){for(int g=this.offset+i,j=this.offset+length;g<j; ++g){if(buffer[g]==h){return g-this.start;}}return -1;}void skip(int g){offset+= g;}int gB(){return buffer[offset++ ];}int EJ;}class NB implements Exception{final String message;NB(this.message);String toString()=>"ArchiveException: ${message}";}class xF{List<int> PH(List<int> g,{bool verify: true}){return OH(new rC(g,byteOrder:SD),verify:verify);}List<int> OH(rC n,{bool verify: false}){bC l=new bC();qC g=new qC(n);FJ=0;GJ=0;HJ=0;IJ=0;if(g.gB()!=aB.TD[0]||g.gB()!=aB.TD[1]||g.gB()!=aB.TD[2]){throw new NB('Invalid Signature');}JJ=g.gB()-aB.mE;if(JJ<0||JJ>9){throw new NB('Invalid BlockSize');}KJ=new Uint32List(JJ*100000);int j=0;while(true){int m=LJ(g);if(m==sE){int i=0;i=(i<<8)|g.gB();i=(i<<8)|g.gB();i=(i<<8)|g.gB();i=(i<<8)|g.gB();int k=MJ(g,l);k=aB.lE(k);if(verify&&k!=i){throw new NB('Invalid block checksum.');}j=((j<<1)|(j>>31))&0xffffffff;j^= k;}else if(m==tE){int h=0;h=(h<<8)|g.gB();h=(h<<8)|g.gB();h=(h<<8)|g.gB();h=(h<<8)|g.gB();if(verify&&h!=j){throw new NB('Invalid combined checksum: ${j} : ${h}');}return l.VF();}}return null;}int LJ(qC k){bool i=true;bool h=true;for(int g=0;g<6; ++g){int j=k.gB();if(j!=aB.nE[g]){h=false;}if(j!=aB.oE[g]){i=false;}if(!i&&!h){throw new NB('Invalid Block Signature');}}return (h)?sE:tE;}int MJ(qC n,bC MC){int rD=n.pB(1);int RB=n.pB(8);RB=(RB<<8)|n.pB(8);RB=(RB<<8)|n.pB(8);NJ=new Uint8List(16);for(int g=0;g<16; ++g){NJ[g]=n.pB(1);}OJ=new Uint8List(256);for(int g=0,sD=0;g<16; ++g,sD+= 16){if(NJ[g]!=0){for(int PB=0;PB<16; ++PB){OJ[sD+PB]=n.pB(1);}}}PJ();if(QJ==0){throw new NB('Data error');}int nC=QJ+2;int dB=n.pB(3);if(dB<2||dB>6){throw new NB('Data error');}RJ=n.pB(15);if(RJ<1){throw new NB('Data error');}SJ=new Uint8List(rE);TJ=new Uint8List(rE);for(int g=0;g<RJ; ++g){int PB=0;while(true){int hB=n.pB(1);if(hB==0){break;}PB++ ;if(PB>=dB){throw new NB('Data error');}}SJ[g]=PB;}Uint8List rB=new Uint8List(sC);for(int g=0;g<dB; ++g){rB[g]=g;}for(int g=0;g<RJ; ++g){int EC=SJ[g];int tD=rB[EC];while(EC>0){rB[EC]=rB[EC-1];EC-- ;}rB[0]=tD;TJ[g]=tD;}UJ=new List<Uint8List>(sC);for(int m=0;m<dB; ++m){UJ[m]=new Uint8List(GD);int eB=n.pB(5);for(int g=0;g<nC; ++g){while(true){if(eB<1||eB>20){throw new NB('Data error');}int hB=n.pB(1);if(hB==0){break;}hB=n.pB(1);if(hB==0){eB++ ;}else{eB-- ;}}UJ[m][g]=eB;}}VJ=new List<Int32List>(sC);WJ=new List<Int32List>(sC);XJ=new List<Int32List>(sC);YJ=new Int32List(sC);for(int m=0;m<dB;m++ ){VJ[m]=new Int32List(GD);WJ[m]=new Int32List(GD);XJ[m]=new Int32List(GD);int TC=32;int oC=0;for(int g=0;g<nC; ++g){if(UJ[m][g]>oC){oC=UJ[m][g];}if(UJ[m][g]<TC){TC=UJ[m][g];}}ZJ(VJ[m],WJ[m],XJ[m],UJ[m],TC,oC,nC);YJ[m]=TC;}int dE=QJ+1;int ED=100000*JJ;int fF=-1;int gF=0;aJ=new Int32List(256);bJ=new Uint8List(BE);cJ=new Int32List(256~/GC);int YB=BE-1;for(int GB=256~/GC-1;GB>=0;GB-- ){for(int ZB=GC-1;ZB>=0;ZB-- ){bJ[YB]=GB*GC+ZB;YB-- ;}cJ[GB]=YB+1;}int CB=0;FJ=0;GJ=-1;int EB=dJ(n);int AB=0;while(true){if(EB==dE){break;}if(EB==CE||EB==DE){int KB=-1;int FC=1;do{if(FC>=2*1024*1024){throw new NB('Data error');}if(EB==CE){KB=KB+(0+1)*FC;}else if(EB==DE){KB=KB+(1+1)*FC;}FC=FC*2;EB=dJ(n);}while(EB==CE||EB==DE);KB++ ;AB=eJ[bJ[cJ[0]]];aJ[AB]+=KB;while(KB>0){if(CB>=ED){throw new NB('Data error');}KJ[CB]=AB;CB++ ;KB-- ;};continue;}else{if(CB>=ED){throw new NB('Data error');}int BB=EB-1;if(BB<GC){int DB=cJ[0];AB=bJ[DB+BB];while(BB>3){int LB=DB+BB;bJ[(LB)]=bJ[(LB)-1];bJ[(LB)-1]=bJ[(LB)-2];bJ[(LB)-2]=bJ[(LB)-3];bJ[(LB)-3]=bJ[(LB)-4];BB-= 4;}while(BB>0){bJ[(DB+BB)]=bJ[(DB+BB)-1];BB-- ;}bJ[DB]=AB;}else{int MB=BB~/GC;int eE=BB%GC;int DB=cJ[MB]+eE;AB=bJ[DB];while(DB>cJ[MB]){bJ[DB]=bJ[DB-1];DB-- ;}cJ[MB]++;while(MB>0){cJ[MB]--;bJ[cJ[MB]]=bJ[cJ[MB-1]+GC-1];MB-- ;}cJ[0]--;bJ[cJ[0]]=AB;if(cJ[0]==0){YB=BE-1;for(int GB=256~/GC-1;GB>=0;GB-- ){for(int ZB=GC-1;ZB>=0;ZB-- ){bJ[YB]=bJ[cJ[GB]+ZB];YB-- ;}cJ[GB]=YB+1;}}}aJ[eJ[AB]]++;KJ[CB]=(eJ[AB]);CB++ ;EB=dJ(n);continue;}}if(RB<0||RB>=CB){throw new NB('Data error');}for(int g=0;g<=255;g++ ){if(aJ[g]<0||aJ[g]>CB){throw new NB('Data error');}}fJ=new Int32List(257);fJ[0]=0;for(int g=1;g<=256;g++ ){fJ[g]=aJ[g-1];}for(int g=1;g<=256;g++ ){fJ[g]+=fJ[g-1];}for(int g=0;g<=256;g++ ){if(fJ[g]<0||fJ[g]>CB){throw new NB('Data error');}}for(int g=1;g<=256;g++ ){if(fJ[g-1]>fJ[g]){throw new NB('Data error');}}for(int g=0;g<CB;g++ ){AB=(KJ[g]&0xff);KJ[fJ[AB]]|=(g<<8);fJ[AB]++;}int q=aB.jE;int h=KJ[RB]>>8;int pC=0;int u;int k=0;int j=0;if(rD!=0){k=0;j=0;if(h>=100000*JJ){throw new NB('Data error');}h=KJ[h];u=h&0xff;h>>= 8;pC++ ;if(k==0){k=tC[j];j++ ;if(j==512){j=0;}}k-- ;u^= ((k==1)?1:0);}else{if(h>=100000*JJ){return q;}h=KJ[h];u=(h&0xff);h>>= 8;pC++ ;}int o=0;int v=0;int FB=CB+1;int l=pC;int IB=u;int i;if(rD!=0){while(true){while(true){if(o==0){break;}MC.QB(v);q=aB.cC(v,q);o-- ;}if(l==FB){return q;}if(l>FB){throw new NB('Data error.');}o=1;v=u;h=KJ[h];i=h&0xff;h>>= 8;if(k==0){k=tC[j];j++ ;if(j==512){j=0;}}k-- ;i^= ((k==1)?1:0);l++ ;if(l==FB){continue;}if(i!=u){u=i;continue;}o=2;h=KJ[h];i=h&0xff;h>>= 8;if(k==0){k=tC[j];j++ ;if(j==512){j=0;}}i^= ((k==1)?1:0);l++ ;if(l==FB){continue;}if(i!=u){u=i;continue;}o=3;h=KJ[h];i=h&0xff;h>>= 8;if(k==0){k=tC[j];j++ ;if(j==512){j=0;}}i^= ((k==1)?1:0);l++ ;if(l==FB){continue;}if(i!=u){u=i;continue;}h=KJ[h];i=h&0xff;h>>= 8;if(k==0){k=tC[j];j++ ;if(j==512){j=0;}}i^= ((k==1)?1:0);l++ ;o=i+4;h=KJ[h];u=h&0xff;h>>= 8;if(k==0){k=tC[j];j++ ;if(j==512){j=0;}}u^= ((k==1)?1:0);l++ ;}}else{while(true){if(o>0){while(true){if(o==1){break;}MC.QB(v);q=aB.cC(v,q);o-- ;}MC.QB(v);q=aB.cC(v,q);}if(l>FB){throw new NB('Data error');}if(l==FB){o=0;return q;}v=IB;int i;if(h>=100000*JJ){throw new NB('Data Error');}h=KJ[h];i=h&0xff;h>>= 8;l++ ;if(i!=IB){IB=i;MC.QB(v);q=aB.cC(v,q);o=0;continue;}if(l==FB){MC.QB(v);q=aB.cC(v,q);o=0;continue;}o=2;if(h>=100000*JJ){throw new NB('Data Error');}h=KJ[h];i=h&0xff;h>>= 8;l++ ;if(l==FB){continue;}if(i!=IB){IB=i;continue;}o=3;if(h>=100000*JJ){throw new NB('Data Error');}h=KJ[h];i=h&0xff;h>>= 8;l++ ;if(l==FB){continue;}if(i!=IB){IB=i;continue;}if(h>=100000*JJ){throw new NB('Data Error');}h=KJ[h];i=h&0xff;h>>= 8;l++ ;o=i+4;if(h>=100000*JJ){throw new NB('Data Error');}h=KJ[h];IB=h&0xff;h>>= 8;l++ ;}}return q;}int dJ(qC i){if(FJ==0){GJ++ ;if(GJ>=RJ){throw new NB('Data error');}FJ=qE;HJ=TJ[GJ];IJ=YJ[HJ];gJ=VJ[HJ];hJ=XJ[HJ];iJ=WJ[HJ];}FJ-- ;int g=IJ;int h=i.pB(g);while(true){if(g>20){throw new NB('Data error');}if(h<=gJ[g]){break;}g++ ;int j=i.pB(1);h=(h<<1)|j;}if(h-iJ[g]<0||h-iJ[g]>=GD){throw new NB('Data error');}return hJ[h-iJ[g]];}void ZJ(Int32List j,Int32List h,Int32List u,Uint8List n,int k,int l,int o){int q=0;for(int g=k;g<=l;g++ ){for(int i=0;i<o;i++ ){if(n[i]==g){u[q]=i;q++ ;}}}for(int g=0;g<AE;g++ ){h[g]=0;}for(int g=0;g<o;g++ ){h[n[g]+1]++;}for(int g=1;g<AE;g++ ){h[g]+=h[g-1];}for(int g=0;g<AE;g++ ){j[g]=0;}int m=0;for(int g=k;g<=l;g++ ){m+= (h[g+1]-h[g]);j[g]=m-1;m<<= 1;}for(int g=k+1;g<=l;g++ ){h[g]=((j[g-1]+1)<<1)-h[g];}}void PJ(){QJ=0;eJ=new Uint8List(256);for(int g=0;g<256; ++g){if(OJ[g]!=0){eJ[QJ++ ]=g;}}}int JJ;Uint32List KJ;Uint8List NJ;Uint8List OJ;Uint8List eJ;Uint8List bJ;Int32List cJ;Uint8List SJ;Uint8List TJ;List<Int32List> VJ;List<Int32List> WJ;List<Int32List> XJ;Int32List YJ;Int32List aJ;int RJ;int FJ=0;int GJ=-1;int HJ=0;int IJ=0;Int32List gJ;Int32List hJ;Int32List iJ;Int32List fJ;List<Uint8List> UJ;int QJ=0;int jJ;static const int sC=6;static const int qE=50;static const int GD=258;static const int AE=23;static const int rE=(2+(900000~/qE));static const int BE=4096;static const int GC=16;static const int CE=0;static const int DE=1;static const int sE=0;static const int tE=2;static const List<int> tC=const[619,720,127,481,931,816,813,233,566,247,985,724,205,454,863,491,741,242,949,214,733,859,335,708,621,574,73,654,730,472,419,436,278,496,867,210,399,680,480,51,878,465,811,169,869,675,611,697,867,561,862,687,507,283,482,129,807,591,733,623,150,238,59,379,684,877,625,169,643,105,170,607,520,932,727,476,693,425,174,647,73,122,335,530,442,853,695,249,445,515,909,545,703,919,874,474,882,500,594,612,641,801,220,162,819,984,589,513,495,799,161,604,958,533,221,400,386,867,600,782,382,596,414,171,516,375,682,485,911,276,98,553,163,354,666,933,424,341,533,870,227,730,475,186,263,647,537,686,600,224,469,68,770,919,190,373,294,822,808,206,184,943,795,384,383,461,404,758,839,887,715,67,618,276,204,918,873,777,604,560,951,160,578,722,79,804,96,409,713,940,652,934,970,447,318,353,859,672,112,785,645,863,803,350,139,93,354,99,820,908,609,772,154,274,580,184,79,626,630,742,653,282,762,623,680,81,927,626,789,125,411,521,938,300,821,78,343,175,128,250,170,774,972,275,999,639,495,78,352,126,857,956,358,619,580,124,737,594,701,612,669,112,134,694,363,992,809,743,168,974,944,375,748,52,600,747,642,182,862,81,344,805,988,739,511,655,814,334,249,515,897,955,664,981,649,113,974,459,893,228,433,837,553,268,926,240,102,654,459,51,686,754,806,760,493,403,415,394,687,700,946,670,656,610,738,392,760,799,887,653,978,321,576,617,626,502,894,679,243,440,680,879,194,572,640,724,926,56,204,700,707,151,457,449,797,195,791,558,945,679,297,59,87,824,713,663,412,693,342,606,134,108,571,364,631,212,174,643,304,329,343,97,430,751,497,314,983,374,822,928,140,206,73,263,980,736,876,478,430,305,170,514,364,692,829,82,855,953,676,246,369,970,294,750,807,827,150,790,288,923,804,378,215,828,592,281,565,555,710,82,896,831,547,261,524,462,293,465,502,56,661,821,976,991,658,869,905,758,745,193,768,550,608,933,378,286,215,979,792,961,61,688,793,644,986,403,106,366,905,644,372,567,466,434,645,210,389,550,919,135,780,773,635,389,707,100,626,958,165,504,920,176,193,713,857,265,203,50,668,108,645,990,626,197,510,357,358,850,858,364,936,638];}class yF{List<int> encode(List<int> l){input=new rC(l,byteOrder:SD);bC j=new bC(byteOrder:SD);SB=new zD(j);final int i=9;SB.qD(aB.TD);SB.QB(aB.mE+i);kJ=100000*i-19;lJ=30;int h=0;int k=100000*i;mJ=new Uint32List(k);nJ=new Uint32List(k+VD);oJ=new Uint32List(65537);pJ=new Uint8List.view(nJ.buffer);qJ=new Uint16List.view(mJ.buffer);rJ=new Uint8List(256);sJ=0;tJ=0;TJ=new Uint8List(wE);SJ=new Uint8List(wE);UJ=new List<Uint8List>(UC);uJ=new List<Int32List>(UC);vJ=new List<Int32List>(UC);for(int g=0;g<UC; ++g){UJ[g]=new Uint8List(zB);uJ[g]=new Int32List(zB);vJ[g]=new Int32List(zB);}wJ=new List<Uint32List>(zB);for(int g=0;g<zB; ++g){wJ[g]=new Uint32List(4);}while(!input.XF){int m=xJ();h=((h<<1)|(h>>31))&0xffffffff;h^= m;sJ++ ;}SB.qD(aB.oE);SB.cE(h);SB.flush();return j.VF();}int xJ(){OJ=new Uint8List(256);yJ=0;zJ=aB.jE;AK=256;BK=0;while(yJ<kJ&&!input.XF){CK(input.gB());}if(AK<256){DK();}AK=256;BK=0;zJ=aB.lE(zJ);EK();return zJ;}void EK(){if(yJ>0){FK();}if(yJ>0){SB.qD(aB.nE);SB.cE(zJ);SB.cB(1,0);SB.cB(24,tJ);GK();HK();}}void GK(){Uint8List j=new Uint8List(256);IK=0;for(int h=0;h<256;h++ ){if(OJ[h]!=0){rJ[h]=IK;IK++ ;}}final int o=IK+1;JK=new Int32List(zB);int i=0;int g=0;for(int h=0;h<IK;h++ ){j[h]=h;}for(int h=0;h<yJ;h++ ){KK(i<=h);int k=mJ[h]-1;if(k<0){k+= yJ;}int n=rJ[pJ[k]];KK(n<IK);if(j[0]==n){g++ ;}else{if(g>0){g-- ;while(true){if(g&1!=0){qJ[i]=XD;i++ ;JK[XD]++;}else{qJ[i]=WD;i++ ;JK[WD]++;}if(g<2){break;}g=(g-2)~/2;}g=0;}int l=j[1];j[1]=j[0];int m=1;int q=n;while(q!=l){m++ ;int u=l;l=j[m];j[m]=u;}j[0]=l;k=m;qJ[i]=k+1;i++ ;JK[k+1]++;}}if(g>0){g-- ;while(true){if(g&1!=0){qJ[i]=XD;i++ ;JK[XD]++;}else{qJ[i]=WD;i++ ;JK[WD]++;}if(g<2){break;}g=(g-2)~/2;}g=0;}qJ[i]=o;i++ ;JK[o]++;LK=i;}void HK(){Uint16List u=new Uint16List(UC);Int32List FC=new Int32List(UC);int v=0;int AB=IK+2;for(int k=0;k<UC;k++ ){for(int l=0;l<AB;l++ ){UJ[k][l]=vE;}}int m;KK(LK>0);if(LK<200){m=2;}else if(LK<600){m=3;}else if(LK<1200){m=4;}else if(LK<2400){m=5;}else{m=6;}int BB=m;int EC=LK;int o=0;int n=0;while(BB>0){int nC=EC~/BB;int LB=0;n=o-1;while(LB<nC&&n<AB-1){n++ ;LB+= JK[n];}if(n>o&&BB!=m&&BB!=1&&((m-BB)%2==1)){LB-= JK[n];n-- ;}for(int l=0;l<AB;l++ ){if(l>=o&&l<=n){UJ[BB-1][l]=CG;}else{UJ[BB-1][l]=vE;}}BB-- ;o=n+1;EC-= LB;}for(int rB=0;rB<BG;rB++ ){for(int k=0;k<m;k++ ){FC[k]=0;}for(int k=0;k<m;k++ ){for(int l=0;l<AB;l++ ){vJ[k][l]=0;}}if(m==6){for(int l=0;l<AB;l++ ){wJ[l][0]=(UJ[1][l]<<16)|UJ[0][l];wJ[l][1]=(UJ[3][l]<<16)|UJ[2][l];wJ[l][2]=(UJ[5][l]<<16)|UJ[4][l];}}v=0;int pC=0;o=0;while(true){if(o>=LK){break;}int n=o+YD-1;if(n>=LK){n=LK-1;}for(int k=0;k<m;k++ ){u[k]=0;}if(m==6&&50==n-o+1){int dB=0;int ZB=0;int YB=0;void j(int DB){int GB=qJ[o+DB];dB+= wJ[GB][0];ZB+= wJ[GB][1];YB+= wJ[GB][2];}j(0);j(1);j(2);j(3);j(4);j(5);j(6);j(7);j(8);j(9);j(10);j(11);j(12);j(13);j(14);j(15);j(16);j(17);j(18);j(19);j(20);j(21);j(22);j(23);j(24);j(25);j(26);j(27);j(28);j(29);j(30);j(31);j(32);j(33);j(34);j(35);j(36);j(37);j(38);j(39);j(40);j(41);j(42);j(43);j(44);j(45);j(46);j(47);j(48);j(49);u[0]=dB&0xffff;u[1]=dB>>16;u[2]=ZB&0xffff;u[3]=ZB>>16;u[4]=YB&0xffff;u[5]=YB>>16;}else{for(int g=o;g<=n;g++ ){int GB=qJ[g];for(int k=0;k<m;k++ ){u[k]+=UJ[k][GB];}}}int hB=999999999;int IB=-1;for(int k=0;k<m;k++ ){if(u[k]<hB){hB=u[k];IB=k;}}pC+= hB;FC[IB]++;TJ[v]=IB;v++ ;if(m==6&&50==n-o+1){void h(int DB){vJ[IB][qJ[o+DB]]++;}h(0);h(1);h(2);h(3);h(4);h(5);h(6);h(7);h(8);h(9);h(10);h(11);h(12);h(13);h(14);h(15);h(16);h(17);h(18);h(19);h(20);h(21);h(22);h(23);h(24);h(25);h(26);h(27);h(28);h(29);h(30);h(31);h(32);h(33);h(34);h(35);h(36);h(37);h(38);h(39);h(40);h(41);h(42);h(43);h(44);h(45);h(46);h(47);h(48);h(49);}else{for(int g=o;g<=n;g++ ){vJ[IB][qJ[g]]++;}}o=n+1;}for(int k=0;k<m;k++ ){MK(UJ[k],vJ[k],AB,17);}}KK(m<8);KK(v<32768&&v<=(2+(900000~/YD)));Uint8List FB=new Uint8List(UC);for(int g=0;g<m;g++ ){FB[g]=g;}for(int g=0;g<v;g++ ){int MC=TJ[g];int q=0;int PB=FB[q];while(MC!=PB){q++ ;int TC=PB;PB=FB[q];FB[q]=TC;}FB[0]=PB;SJ[g]=q;}for(int k=0;k<m;k++ ){int MB=32;int KB=0;for(int g=0;g<AB;g++ ){if(UJ[k][g]>KB){KB=UJ[k][g];}if(UJ[k][g]<MB){MB=UJ[k][g];}}KK(!(KB>17));KK(!(MB<1));NK(uJ[k],UJ[k],MB,KB,AB);}Uint8List RB=new Uint8List(16);for(int g=0;g<16;g++ ){RB[g]=0;for(int q=0;q<16;q++ ){if(OJ[g*16+q]!=0){RB[g]=1;}}}for(int g=0;g<16;g++ ){if(RB[g]!=0){SB.cB(1,1);}else{SB.cB(1,0);}}for(int g=0;g<16;g++ ){if(RB[g]!=0){for(int q=0;q<16;q++ ){if(OJ[g*16+q]!=0){SB.cB(1,1);}else{SB.cB(1,0);}}}}SB.cB(3,m);SB.cB(15,v);for(int g=0;g<v;g++ ){for(int q=0;q<SJ[g];q++ ){SB.cB(1,1);}SB.cB(1,0);}for(int k=0;k<m;k++ ){int EB=UJ[k][0];SB.cB(5,EB);for(int g=0;g<AB;g++ ){while(EB<UJ[k][g]){SB.cB(2,2);EB++ ;}while(EB>UJ[k][g]){SB.cB(2,3);EB-- ;}SB.cB(1,0);}}int CB=0;o=0;while(true){if(o>=LK){break;}int n=o+YD-1;if(n>=LK){n=LK-1;}KK(TJ[CB]<m);if(m==6&&50==n-o+1){int eB;Uint8List oC=UJ[TJ[CB]];Int32List ED=uJ[TJ[CB]];void i(int DB){eB=qJ[o+DB];SB.cB(oC[eB],ED[eB]);}i(0);i(1);i(2);i(3);i(4);i(5);i(6);i(7);i(8);i(9);i(10);i(11);i(12);i(13);i(14);i(15);i(16);i(17);i(18);i(19);i(20);i(21);i(22);i(23);i(24);i(25);i(26);i(27);i(28);i(29);i(30);i(31);i(32);i(33);i(34);i(35);i(36);i(37);i(38);i(39);i(40);i(41);i(42);i(43);i(44);i(45);i(46);i(47);i(48);i(49);}else{for(int g=o;g<=n;g++ ){SB.cB(UJ[TJ[CB]][qJ[g]],uJ[TJ[CB]][qJ[g]]);}}o=n+1;CB++ ;}KK(CB==v);}void MK(Uint8List YB,Int32List BB,int q,int ZB){Int32List g=new Int32List(zB+2);Int32List j=new Int32List(zB*2);Int32List m=new Int32List(zB*2);int i;int n;for(int h=0;h<q;h++ ){j[h+1]=(BB[h]==0?1:BB[h])<<8;}void CB(int v){int k=v;int u=g[k];while(j[u]<j[g[k>>1]]){g[k]=g[k>>1];k>>= 1;}g[k]=u;}void DB(int v){int k=v;int u=g[k];while(true){int l=k<<1;if(l>i){break;}if(l<i&&j[g[l+1]]<j[g[l]]){l++ ;}if(j[u]<j[g[l]]){break;}g[k]=g[l];k=l;}g[k]=u;}int EB(int dB)=>((dB)&0xffffff00);int FB(int eB)=>((eB)&0x000000ff);int hB(int GB,int IB)=>((GB)>(IB)?(GB):(IB));int rB(int KB,int LB)=>(EB(KB)+EB(LB))|(1+hB(FB(KB),FB(LB)));while(true){n=q;i=0;g[0]=0;j[0]=0;m[0]=-2;for(int h=1;h<=q;h++ ){m[h]=-1;i++ ;g[i]=h;CB(i);}KK(i<(zB+2));while(i>1){int MB=g[1];g[1]=g[i];i-- ;DB(1);int PB=g[1];g[1]=g[i];i-- ;DB(1);n++ ;m[MB]=m[PB]=n;j[n]=rB(j[MB],j[PB]);m[n]=-1;i++ ;g[i]=n;CB(i);}KK(n<(zB*2));bool RB=false;for(int h=1;h<=q;h++ ){int o=0;int AB=h;while(m[AB]>=0){AB=m[AB];o++ ;}YB[h-1]=o;if(o>ZB){RB=true;}}if(!RB){break;}for(int h=1;h<=q;h++ ){int o=j[h]>>8;o=1+(o~/2);j[h]=o<<8;}}}void NK(Int32List j,Uint8List k,int l,int m,int n){int h=0;for(int i=l;i<=m;i++ ){for(int g=0;g<n;g++ ){if(k[g]==i){j[g]=h;h++ ;}}h<<= 1;}}void FK(){if(yJ<10000){OK(mJ,nJ,oJ,yJ);}else{int g=yJ+VD;if(g&1!=0){g++ ;}Uint16List i=new Uint16List.view(pJ.buffer,g);int h=lJ;if(h<1){h=1;}if(h>100){h=100;}int j=yJ*((h-1)~/3);PK=j;QK(mJ,pJ,i,oJ,yJ);if(PK<0){OK(mJ,nJ,oJ,yJ);}}tJ=-1;for(int g=0;g<yJ;g++ ){if(mJ[g]==0){tJ=g;break;}}KK(tJ!=-1);}void KK(bool g){if(!g){throw new NB('Data error');}}void OK(Uint32List o,Uint32List v,Uint32List q,int j){Int32List l=new Int32List(257);Int32List AB=new Int32List(256);Uint8List BB=new Uint8List.view(v.buffer);int CB(int i)=>q[i>>5]|=(1<<(i&31));int LB(int i)=>q[i>>5]&=~(1<<(i&31));bool m(int i)=>(q[i>>5]&(1<<(i&31))!=0);int EB(int i)=>q[(i)>>5];bool FB(int i)=>((i)&0x01f)!=0;for(int g=0;g<257;g++ ){l[g]=0;}for(int g=0;g<j;g++ ){l[BB[g]]++;}for(int g=0;g<256;g++ ){AB[g]=l[g];}for(int g=1;g<257;g++ ){l[g]+=l[g-1];}for(int g=0;g<j;g++ ){int k=BB[g];int h=l[k]-1;l[k]=h;o[h]=g;}int MB=2+(j~/32);for(int g=0;g<MB;g++ ){q[g]=0;}for(int g=0;g<256;g++ ){CB(l[g]);}for(int g=0;g<32;g++ ){CB(j+2*g);LB(j+2*g+1);}int DB=1;while(true){int k=0;for(int g=0;g<j;g++ ){if(m(g)){k=g;}int h=o[g]-DB;if(h<0){h+= j;}v[h]=k;}int GB=0;int n=-1;while(true){int h=n+1;while(m(h)&&FB(h)){h++ ;}if(m(h)){while(EB(h)==0xffffffff){h+= 32;}while(m(h)){h++ ;}}int u=h-1;if(u>=j){break;}while(!m(h)&&FB(h)){h++ ;}if(!m(h)){while(EB(h)==0x00000000){h+= 32;}while(!m(h)){h++ ;}}n=h-1;if(n>=j){break;}if(n>u){GB+= (n-u+1);RK(o,v,u,n);int IB=-1;for(int g=u;g<=n;g++ ){int KB=v[o[g]];if(IB!=KB){CB(g);IB=KB;}}}}DB*= 2;if(DB>j||GB==0){break;}}int k=0;for(int g=0;g<j;g++ ){while(AB[k]==0){k++ ;}AB[k]--;BB[o[g]]=k;}KK(k<256);}void RK(Uint32List g,Uint32List u,int ZB,int dB){const int eB=10;const int CB=100;Int32List GB=new Int32List(CB);Int32List IB=new Int32List(CB);int m=0;void AB(int hB,int rB){GB[m]=hB;IB[m]=rB;m++ ;}int KB(int LB,int MB)=>((LB)<(MB))?(LB):(MB);void PB(DB,EB,RB){while(RB>0){int n=g[DB];g[DB]=g[EB];g[EB]=n;DB++ ;EB++ ;RB-- ;}}int FB=0;AB(ZB,dB);while(m>0){KK(m<CB-1);m-- ;int j=GB[m];int k=IB[m];if(k-j<eB){SK(g,u,j,k);continue;}FB=((FB*7621)+1)%32768;int YB=FB%3;int BB;if(YB==0){BB=u[g[j]];}else if(YB==1){BB=u[g[(j+k)>>1]];}else{BB=u[g[k]];}int h=j;int o=j;int i=k;int q=k;while(true){while(true){if(h>i){break;}int l=u[g[h]]-BB;if(l==0){int n=g[h];g[h]=g[o];g[o]=n;o++ ;h++ ;continue;}if(l>0){break;}h++ ;}while(true){if(h>i){break;}int l=u[g[i]]-BB;if(l==0){int n=g[i];g[i]=g[q];g[q]=n;q-- ;i-- ;continue;}if(l<0){break;}i-- ;}if(h>i){break;}int n=g[h];g[h]=g[i];g[i]=n;h++ ;i-- ;}KK(i==h-1);if(q<o){continue;}int l=KB(o-j,h-o);PB(j,h-l,l);int v=KB(k-q,q-i);PB(h,k-v+1,v);l=j+h-o-1;v=k-(q-i)+1;if(l-j>k-v){AB(j,l);AB(v,k);}else{AB(v,k);AB(j,l);}}}void SK(Uint32List h,Uint32List l,int m,int j){if(m==j){return;}if(j-m>3){for(int i=j-4;i>=m;i-- ){int k=h[i];int n=l[k];int g;for(g=i+4;g<=j&&n>l[h[g]];g+= 4){h[g-4]=h[g];}h[g-4]=k;}}for(int i=j-1;i>=m;i-- ){int k=h[i];int n=l[k];int g;for(g=i+1;g<=j&&n>l[h[g]];g++ ){h[g-1]=h[g];}h[g-1]=k;}}void QK(Uint32List m,Uint8List k,Uint16List o,Uint32List j,int q){Int32List AB=new Int32List(256);Uint8List BB=new Uint8List(256);Int32List CB=new Int32List(256);Int32List DB=new Int32List(256);int RB(int YB)=>(oJ[((YB)+1)<<8]-oJ[(YB)<<8]);const int IB=2097152;const int v=4292870143;for(int h=65536;h>=0;h-- ){j[h]=0;}int g=k[0]<<8;int h=q-1;for(;h>=3;h-= 4){o[h]=0;g=(g>>8)|((k[h])<<8);j[g]++;o[h-1]=0;g=(g>>8)|((k[h-1])<<8);j[g]++;o[h-2]=0;g=(g>>8)|((k[h-2])<<8);j[g]++;o[h-3]=0;g=(g>>8)|((k[h-3])<<8);j[g]++;}for(;h>=0;h-- ){o[h]=0;g=(g>>8)|((k[h])<<8);j[g]++;}for(h=0;h<VD;h++ ){k[q+h]=k[h];o[q+h]=0;}for(h=1;h<=65536;h++ ){j[h]+=j[h-1];}int i=k[0]<<8;h=q-1;for(;h>=3;h-= 4){i=(i>>8)|(k[h]<<8);g=j[i]-1;j[i]=g;m[g]=h;i=(i>>8)|(k[h-1]<<8);g=j[i]-1;j[i]=g;m[g]=h-1;i=(i>>8)|(k[h-2]<<8);g=j[i]-1;j[i]=g;m[g]=h-2;i=(i>>8)|(k[h-3]<<8);g=j[i]-1;j[i]=g;m[g]=h-3;}for(;h>=0;h-- ){i=(i>>8)|(k[h]<<8);g=j[i]-1;j[i]=g;m[g]=h;}for(h=0;h<=255;h++ ){BB[h]=0;AB[h]=h;}int n=1;do{n=3*n+1;}while(n<=256);do{n=n~/3;for(h=n;h<=255;h++ ){int ZB=AB[h];g=h;while(RB(AB[g-n])>RB(ZB)){AB[g]=AB[g-n];g=g-n;if(g<=(n-1)){break;}}AB[g]=ZB;}}while(n!=1);int hB=0;for(h=0;h<=255;h++ ){int l=AB[h];for(g=0;g<=255;g++ ){if(g!=l){int FB=(l<<8)+g;if((oJ[FB]&IB)==0){int KB=oJ[FB]&v;int LB=(oJ[FB+1]&v)-1;if(LB>KB){TK(m,k,o,q,KB,LB,EE);hB+= (LB-KB+1);if(PK<0){return;}}}oJ[FB]|=IB;}}KK(BB[l]==0);for(g=0;g<=255;g++ ){CB[g]=oJ[(g<<8)+l]&v;DB[g]=(oJ[(g<<8)+l+1]&v)-1;}for(g=oJ[l<<8]&v;g<CB[l];g++ ){int u=m[g]-1;if(u<0)u+= q;int EB=k[u];if(BB[EB]==0){m[CB[EB]++]=u;}}for(g=(oJ[(l+1)<<8]&v)-1;g>DB[l];g-- ){int u=m[g]-1;if(u<0){u+= q;}int EB=k[u];if(BB[EB]==0){m[DB[EB]--]=u;}}KK((CB[l]-1==DB[l])||(CB[l]==0&&DB[l]==q-1));for(g=0;g<=255;g++ ){oJ[(g<<8)+l]|=IB;}BB[l]=1;if(h<255){int dB=oJ[l<<8]&v;int MB=(oJ[(l+1)<<8]&v)-dB;int GB=0;while((MB>>GB)>65534){GB++ ;}for(g=MB-1;g>=0;g-- ){int PB=m[dB+g];int eB=(g>>GB)&0xffff;o[PB]=eB;if(PB<VD)o[PB+q]=eB;}KK(((MB-1)>>GB)<=65535);}}}void TK(Uint32List g,Uint8List IB,Uint16List gF,int eE,int dE,int rD,int sD){const PB=100;const tD=20;const ED=(EE+uE);Int32List FC=new Int32List(PB);Int32List EC=new Int32List(PB);Int32List rB=new Int32List(PB);Int32List o=new Int32List(3);Int32List q=new Int32List(3);Int32List u=new Int32List(3);int v=0;void KB(int oC,int nC,int pC){FC[v]=oC;EC[v]=nC;rB[v]=pC;v++ ;}int fF(int DB,int j,int dB){if(DB>j){int CB=DB;DB=j;j=CB;}if(j>dB){j=dB;if(DB>j){j=DB;}}return j;}void eB(int RB,int YB,int MC){while(MC>0){int CB=g[RB];g[RB]=g[YB];g[YB]=CB;RB++ ;YB++ ;MC-- ;}}int hB(int DB,int j)=>((DB)<(j))?(DB):(j);int AB(int BB)=>(q[BB]-o[BB]);void ZB(int BB,int GB){int MB=o[BB];o[BB]=o[GB];o[GB]=MB;MB=q[BB];q[BB]=q[GB];q[GB]=MB;MB=u[BB];u[BB]=u[GB];u[GB]=MB;}KB(dE,rD,sD);while(v>0){KK(v<PB-2);v-- ;int n=FC[v];int m=EC[v];int l=rB[v];if(m-n<tD||l>ED){UK(g,IB,gF,eE,n,m,l);if(PK<0){return;}continue;}int TC=fF(IB[g[n]+l],IB[g[m]+l],IB[g[(n+m)>>1]+l]);int h=n;int EB=n;int i=m;int FB=m;while(true){while(true){if(h>i){break;}int k=(IB[g[h]+l])-TC;if(k==0){int CB=g[h];g[h]=g[EB];g[EB]=CB;EB++ ;h++ ;continue;}if(k>0){break;}h++ ;}while(true){if(h>i){break;}int k=(IB[g[i]+l])-TC;if(k==0){int CB=g[i];g[i]=g[FB];g[FB]=CB;FB-- ;i-- ;continue;}if(k<0){break;}i-- ;}if(h>i){break;}int CB=g[h];g[h]=g[i];g[i]=CB;h++ ;i-- ;}KK(i==h-1);if(FB<EB){KB(n,m,l+1);continue;}int k=hB(EB-n,h-EB);eB(n,h-k,k);int LB=hB(m-FB,FB-i);eB(h,m-LB+1,LB);k=n+h-EB-1;LB=m-(FB-i)+1;o[0]=n;q[0]=k;u[0]=l;o[1]=LB;q[1]=m;u[1]=l;o[2]=k+1;q[2]=LB-1;u[2]=l+1;if(AB(0)<AB(1)){ZB(0,1);}if(AB(1)<AB(2)){ZB(1,2);}if(AB(0)<AB(1)){ZB(0,1);}KK(AB(0)>=AB(1));KK(AB(1)>=AB(2));KB(o[0],q[0],u[0]);KB(o[1],q[1],u[1]);KB(o[2],q[2],u[2]);}}void UK(Uint32List h,Uint8List q,Uint16List u,int v,int n,int o,int l){int AB=o-n+1;if(AB<2){return;}const List<int> BB=const[1,4,13,40,121,364,1093,3280,9841,29524,88573,265720,797161,2391484];int m=0;while(BB[m]<AB){m++ ;}m-- ;for(;m>=0;m-- ){int i=BB[m];int j=n+i;while(true){if(j>o){break;}int k=h[j];int g=j;while(VK(h[g-i]+l,k+l,q,u,v)){h[g]=h[g-i];g=g-i;if(g<=(n+i-1)){break;}}h[g]=k;j++ ;if(j>o){break;}k=h[j];g=j;while(VK(h[g-i]+l,k+l,q,u,v)){h[g]=h[g-i];g=g-i;if(g<=(n+i-1)){break;}}h[g]=k;j++ ;if(j>o){break;}k=h[j];g=j;while(VK(h[g-i]+l,k+l,q,u,v)){h[g]=h[g-i];g=g-i;if(g<=(n+i-1)){break;}}h[g]=k;j++ ;if(PK<0){return;}}}}bool VK(int i,int j,Uint8List k,Uint16List n,int o){KK(i!=j);int g=k[i];int h=k[j];if(g!=h){return (g>h);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}i++ ;j++ ;int q=o+8;do{g=k[i];h=k[j];if(g!=h){return (g>h);}int l=n[i];int m=n[j];if(l!=m){return (l>m);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}l=n[i];m=n[j];if(l!=m){return (l>m);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}l=n[i];m=n[j];if(l!=m){return (l>m);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}l=n[i];m=n[j];if(l!=m){return (l>m);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}l=n[i];m=n[j];if(l!=m){return (l>m);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}l=n[i];m=n[j];if(l!=m){return (l>m);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}l=n[i];m=n[j];if(l!=m){return (l>m);}i++ ;j++ ;g=k[i];h=k[j];if(g!=h){return (g>h);}l=n[i];m=n[j];if(l!=m){return (l>m);}i++ ;j++ ;if(i>=o){i-= o;}if(j>=o){j-= o;}q-= 8;PK-- ;}while(q>=0);return false;}void CK(int g){if(g!=AK&&BK==1){zJ=aB.cC(AK,zJ);OJ[AK]=1;pJ[yJ]=AK;yJ++ ;AK=g;}else{if(g!=AK||BK==255){if(AK<256){DK();}AK=g;BK=1;}else{BK++ ;}}}void DK(){for(int g=0;g<BK;g++ ){zJ=aB.cC(AK,zJ);}OJ[AK]=1;switch (BK){case 1:pJ[yJ]=AK;yJ++ ;break;case 2:pJ[yJ]=AK;yJ++ ;pJ[yJ]=AK;yJ++ ;break;case 3:pJ[yJ]=AK;yJ++ ;pJ[yJ]=AK;yJ++ ;pJ[yJ]=AK;yJ++ ;break;default:OJ[BK-4]=1;pJ[yJ]=AK;yJ++ ;pJ[yJ]=AK;yJ++ ;pJ[yJ]=AK;yJ++ ;pJ[yJ]=AK;yJ++ ;pJ[yJ]=BK-4;yJ++ ;break;}}rC input;zD SB;int kJ;int AK;int BK;int yJ;int zJ;int sJ;int lJ;int PK;int tJ;Uint32List mJ;Uint32List nJ;Uint32List oJ;Uint8List pJ;Uint8List OJ;Uint16List qJ;int IK;int LK;Int32List JK;Uint8List rJ;List<Uint8List> UJ;List<Int32List> uJ;List<Int32List> vJ;List<Uint32List> wJ;Uint8List TJ;Uint8List SJ;static const int EE=2;static const int uE=12;static const int AG=18;static const int VD=(EE+uE+AG+2);static const int zB=258;static const int WD=0;static const int XD=1;static const int UC=6;static const int YD=50;static const int BG=4;static const int CG=0;static const int vE=15;static const int wE=(2+(900000~/YD));}String xE(g)=>Uri.decodeComponent(g.replaceAll(r"\+",' '));String DG(DateTime l){var m=['Mon','Tue','Wed','Thi','Fri','Sat','Sun'];var n=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];var h=(int i,int o){var j=i.toString();var k=o-j.length;return (k>0)?'${new List.filled(k,'0').join('')}${i}':j;};var g=l.toUtc();var q=h(g.hour,2);var u=h(g.minute,2);var v=h(g.second,2);return '${m[g.weekday-1]}, ${g.day} ${n[g.month-1]} ${g.year} '+'${q}:${u}:${v} ${g.timeZoneName}';}String EG(String j){var m=new Map();var i=document.cookie!=null?document.cookie.split('; '):[] ;for(var g=0,k=i.length;g<k;g++ ){var h=i[g].split('=');var l=xE(h[0]);if(j==l){return h[1]!=null?xE(h[1]):null;}}return null;}void yE(String g,String h,{expires,path,domain,secure}){if(expires is num){expires=new DateTime.fromMillisecondsSinceEpoch(new DateTime.now().millisecondsSinceEpoch+expires*24*60*60*1000);}var i=([Uri.encodeComponent(g),'=',Uri.encodeComponent(h),expires!=null?'; expires='+DG(expires):'',path!=null?'; path='+path:'',domain!=null?'; domain='+domain:'',secure!=null&&secure==true?'; secure':''].join(''));document.cookie=i;}abstract class zE{static const int ZD=61;static const int FG=13;static const int GG=10;static const int HG=76;static const String IG="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";static const String JG="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";static const List<int> FE=const[-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-1,-2,-2,-1,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,62,-2,62,-2,63,52,53,54,55,56,57,58,59,60,61,-2,-2,-2,0,-2,-2,-2,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-2,-2,-2,-2,63,-2,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2];static String LG(List<int> k,[bool AB=false,bool q=false]){int m=k.length;if(m==0){return "";}final String j=AB?JG:IG;final int n=m.remainder(3);final int BB=m-n;int o=((m~/3)*4)+((n>0)?4:0);if(q){o+= ((o-1)~/HG)<<1;}List<int> g=new List<int>(o);int h=0,l=0,u=0;while(l<BB){int i=((k[l++ ]<<16)&0xFFFFFF)|((k[l++ ]<<8)&0xFFFFFF)|k[l++ ];g[h++ ]=j.codeUnitAt(i>>18);g[h++ ]=j.codeUnitAt((i>>12)&0x3F);g[h++ ]=j.codeUnitAt((i>>6)&0x3F);g[h++ ]=j.codeUnitAt(i&0x3f);if(q&& ++u==19&&h<o-2){g[h++ ]=FG;g[h++ ]=GG;u=0;}}if(n==1){int i=k[l];g[h++ ]=j.codeUnitAt(i>>2);g[h++ ]=j.codeUnitAt((i<<4)&0x3F);g[h++ ]=ZD;g[h++ ]=ZD;}else if(n==2){int i=k[l];int v=k[l+1];g[h++ ]=j.codeUnitAt(i>>2);g[h++ ]=j.codeUnitAt(((i<<4)|(v>>4))&0x3F);g[h++ ]=j.codeUnitAt((v<<2)&0x3F);g[h++ ]=ZD;}return new String.fromCharCodes(g);}static List<int> NG(String h){int j=h.length;if(j==0){return new List<int>(0);}int o=0;for(int g=0;g<j;g++ ){int k=FE[h.codeUnitAt(g)];if(k<0){o++ ;if(k==-2){throw new FormatException('Invalid character: ${h[g]}');}}}if((j-o)%4!=0){throw new FormatException('''Size of Base 64 characters in Input
          must be a multiple of 4. Input: ${h}''');}int q=0;for(int g=j-1;g>=0;g-- ){int u=h.codeUnitAt(g);if(FE[u]>0)break;if(u==ZD)q++ ;}int m=(((j-o)*6)>>3)-q;List<int> n=new List<int>(m);for(int g=0,i=0;i<m;){int l=0;for(int v=4;v>0;){int k=FE[h.codeUnitAt(g++ )];if(k>=0){l=((l<<6)&0xFFFFFF)|k;v-- ;}}n[i++ ]=l>>16;if(i<m){n[i++ ]=(l>>8)&0xFF;if(i<m)n[i++ ]=l&0xFF;}}return n;}}class AF{static String KG(List<int> g,{bool urlSafe: false,bool addLineSeparator: false}){return zE.LG(g,urlSafe,addLineSeparator);}static List<int> MG(String g){return zE.NG(g);}}