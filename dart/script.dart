import "dart:html" as m;import "dart:js" as GB;import "dart:async" as SB;class HB{static const String IB="Chrome";static const String JB="Firefox";static const String KB="Internet Explorer";static const String LB="Safari";final String CB;final String minimumVersion;const HB(this.CB,[this.minimumVersion]);}class MB{const MB();}class NB{final String name;const NB(this.name);}class OB{const OB();}class PB{const PB();}class QB{void DB(){TB();UB();VB();WB();XB();YB();ZB();}void TB(){m.Element j=m.query('.close-jumbotron-button');m.Element k=m.query('.open-jumbotron-button');if(j==null||k==null){return;}m.Element g=m.query('.jumbotron');m.Element h=m.query('.jumbotron-folded');j.onClick.listen((i){g.style.display='none';h.style.display='block';v('closeJumbotron','1',expires:180);i.stopPropagation();});k.onClick.listen((i){g.style.display='block';h.style.display='none';v('closeJumbotron','1',expires:180);i.stopPropagation();});if(BB('closeJumbotron')=='1'){g.style.display='none';h.style.display='block';}}void UB(){m.Element i=m.query('.navbar-toggle-button');m.Element g=m.query('.navbar-collapsible-block');bool h=false;var j=(aB){if(h){g.classes..add('in')..remove('collapse')..remove('collapsing');}else{g.classes..add('collapse')..remove('collapsing')..remove('in');g.style.height='0';}};g.onTransitionEnd.listen(j);i.onClick.listen((l){h=!h;g.classes..add('collapsing')..remove('collapse')..remove('in');if(h){int k=g.scrollHeight+1;g.style.height="${k}px";}else{g.style.height="0";}});}void VB(){List<m.Node> k=m.document.getElementsByTagName('span');DateTime l=new DateTime.now();Duration n=l.timeZoneOffset;List<String> o=const['Понедельник','Вторник','Среда','Четверг','Пятница','Суббота','Воскресенье'];List<String> q=const['января','февраля','марта','апреля','мая','июня','июля','августа','сентября','октября','ноября','декабря'];k.forEach((m.Element h){String i=h.dataset['postDate'];if(i==null){return;}DateTime j=DateTime.parse(i);if(j==null){return;}DateTime g=j.add(n);h.text="${o[g.weekday-1]}, ${g.day} ${q[g.month-1]} ${g.year}" ", ${g.hour<10?'0':''}${g.hour}:${g.minute<10?'0':''}${g.minute}";});}void WB(){m.ElementList h=m.queryAll('span.post-comments');if(h.length==0){return;}new SB.Timer.periodic(new Duration(microseconds:100),(l){if(h[0].text.startsWith('Считаем')){return;}l.cancel();h.forEach((m.Element n){m.Element i=n.query('a');if(i==null){return;}i.text=i.text.replaceAllMapped(new RegExp('^(\\d+) комментариев\$'),(Match k){int g=int.parse(k[1]);if((g%100/10).round()!=1){int j=g%10;if(j==1){return '${g} комментарий';}else if(j>=2&&j<=4){return '${g} комментария';}}return k[0];});});});}void XB(){if(bB()){cB();}}bool bB(){final m.NodeValidatorBuilder dB=new m.NodeValidatorBuilder.common()..allowElement('span',attributes:['data-linenum']);m.ElementList o=m.queryAll('pre > code.sourceCode');if(o.length>0){GB.JsObject s=GB.context['hljs'];o.forEach((m.HtmlElement j){s.callMethod('highlightBlock',[j]);List<String> h=j.innerHtml.split('\n');RegExp t=new RegExp(r'<span[\s\S]*?>');RegExp EB=new RegExp(r'</span>');List<String> k=[] ;for(int g=0;g<h.length; ++g){String i='<span class="line" data-linenum="${g+1}">';k=[] ;if(h[g]==''){i+= '&nbsp;';}else{String l=k.join('')+h[g];i+= l;Iterable<Match> q=t.allMatches(l);Iterable<Match> FB=EB.allMatches(l);for(int n=FB.length;n<q.length; ++n){k.add(q.elementAt(n).group(0));i+= '</span>';}}i+= '</span>';h[g]=i;}j.setInnerHtml(h.join('\n'),validator:dB);j.classes.add('highlighted');});return true;}else{return false;}}void cB(){m.Element k=new m.DivElement()..classes.add('tooltip-inner');m.Element g=new m.DivElement()..append(new m.DivElement()..classes.add('tooltip-arrow'))..append(k)..classes.addAll(['tooltip','left','fade']);g.classes.add(m.CssStyleDeclaration.supportsTransitions?'out':'in');g.style.display='none';m.document.body.append(g);g.onTransitionEnd.listen((m.TransitionEvent i){if(g.classes.contains('out')){g.style.display='none';}});void n(){if(!m.CssStyleDeclaration.supportsTransitions){g.style.display='none';}else{g.classes..remove('in')..add('out');}}void o(q){g.style..visibility='hidden'..display='block';g.style..left="${q.offsetLeft-g.clientWidth}px"..top="${q.offsetTop-2}px"..visibility="visible";if(m.CssStyleDeclaration.supportsTransitions){g.classes..remove('out')..add('in');}}m.Element h;bool j=false;var l=m.queryAll('span.line');l.onClick.listen((m.MouseEvent i){if(h==i.currentTarget){if(!j){j=true;return;}n();h=null;j=false;return;}j=true;h=i.currentTarget;k.text='#'+h.getAttribute('data-linenum');o(h);});l.onMouseMove.listen((m.MouseEvent i){if(j||h==i.currentTarget){return;}h=i.currentTarget;k.text='#'+h.getAttribute('data-linenum');o(h);});l.onMouseOut.listen((m.MouseEvent i){if(j||h!=i.currentTarget){return;}n();h=null;});}void YB(){var j=m.queryAll('.note-link');if(j.length==0){return;}m.Element k=new m.HeadingElement.h3()..classes.add('popover-title');m.DivElement l=new m.DivElement()..classes.add('popover-content');m.Element g=new m.DivElement()..append(new m.DivElement()..classes.add('arrow'))..append(k)..append(l)..classes.addAll(['popover','top','fade']);g.classes.add(m.CssStyleDeclaration.supportsTransitions?'out':'in');g.style.display='none';m.document.body.append(g);g.onTransitionEnd.listen((m.TransitionEvent n){if(g.classes.contains('out')){g.style.display='none';}});var i;final m.NodeValidatorBuilder dB=new m.NodeValidatorBuilder.common()..allowNavigation(new RB());j.onClick.listen((m.MouseEvent n){var h=n.currentTarget;if(i==h){if(!m.CssStyleDeclaration.supportsTransitions){g.style.display='none';}else{g.classes..remove('in')..add('out');}i=null;return;}k.text="Примечание ${h.text}";var o=m.query('.footnotes li[data-for=${h.id}]');if(o==null){return;}l.setInnerHtml(o.innerHtml,validator:dB);i=h;g.style..visibility='hidden'..display='block';g.style..left="${h.offsetLeft+(h.clientWidth-g.clientWidth)/2+2}px"..top="${h.offsetTop-g.clientHeight}px"..visibility="visible";if(m.CssStyleDeclaration.supportsTransitions){g.classes..remove('out')..add('in');}});}void ZB(){m.Element g=m.query('.pager .previous');m.Element h=m.query('.pager .next');bool k=m.window.navigator.platform.indexOf('Mac')!=-1;if(g!=null){g.attributes['title']+=" (${k?'⌥←':'Ctrl + ←'})";}if(h!=null){h.attributes['title']+=" (${k?'⌥→':'Ctrl + →'})";}if(g!=null||h!=null){m.document.onKeyDown.listen((m.KeyboardEvent i){if(i.altKey||i.ctrlKey){m.Element j;if(i.keyCode==m.KeyCode.LEFT){j=g;}else if(i.keyCode==m.KeyCode.RIGHT){j=h;}if(j!=null){m.window.location.replace(j.query('a').getAttribute('href'));}}});}}}class RB implements m.UriPolicy{bool allowsUri(String g){return true;}}void main(){var g=new QB();g.DB();}String u(g)=>Uri.decodeComponent(g.replaceAll(r"\+",' '));String AB(DateTime k){var l=['Mon','Tue','Wed','Thi','Fri','Sat','Sun'];var n=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Dec'];var eB=(int h,int o){var i=h.toString();var j=o-i.length;return (j>0)?'${new List.filled(j,'0').join('')}${h}':i;};var g=k.toUtc();var q=eB(g.hour,2);var s=eB(g.minute,2);var t=eB(g.second,2);return '${l[g.weekday-1]}, ${g.day} ${n[g.month-1]} ${g.year} '+'${q}:${s}:${t} ${g.timeZoneName}';}String BB(String j){var n=new Map();var i=m.document.cookie!=null?m.document.cookie.split('; '):[] ;for(var g=0,k=i.length;g<k;g++ ){var h=i[g].split('=');var l=u(h[0]);if(j==l){return h[1]!=null?u(h[1]):null;}}return null;}void v(String g,String h,{expires,path,domain,secure}){if(expires is num){expires=new DateTime.fromMillisecondsSinceEpoch(new DateTime.now().millisecondsSinceEpoch+expires*24*60*60*1000);}var i=([Uri.encodeComponent(g),'=',Uri.encodeComponent(h),expires!=null?'; expires='+AB(expires):'',path!=null?'; path='+path:'',domain!=null?'; domain='+domain:'',secure!=null&&secure==true?'; secure':''].join(''));m.document.cookie=i;}
//# sourceMappingURL=script.dart.map
//@ sourceMappingURL=script.dart.map
